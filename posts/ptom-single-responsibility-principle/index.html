<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta charset="utf-8"><meta name="author" content="Jason Meridth"><title>PTOM: Single Responsibility Principle | Jason Meridth's Blog</title><link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="../../assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"><link href="../../assets/css/rst.css" rel="stylesheet" type="text/css"><link href="../../assets/css/code.css" rel="stylesheet" type="text/css"><link href="../../assets/css/colorbox.css" rel="stylesheet" type="text/css"><link href="../../assets/css/theme.css" rel="stylesheet" type="text/css"><link rel="canonical" href="http://blog.jasonmeridth.com/posts/ptom-single-responsibility-principle/"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml"></head><body>
<!-- Menubar -->
<div class="navbar navbar-fixed-top" id="navbar">
    <div class="navbar-inner">
        <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

            <a class="brand" href="http://blog.jasonmeridth.com/">
            Jason Meridth's Blog
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav"><li><a href="../../archive.html">Archives</a>
            
        
    
        
            
                </li><li><a href="../../categories/index.html">Tags</a>
            
        
    
        
            
                </li><li><a href="https://github.com/jmeridth"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/github.png" border="0"></a>
            
        
    
        
            
                </li><li><a href="http://twitter.com/jmeridth"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/twitter.png" border="0"></a>
            
        
    
        
            
                </li><li><a href="../../rss.xml"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/rss.png" border="0"></a>
            
        
    

                </li></ul><!-- Custom search with google--><form id="search" action="http://google.com/search" method="get" class="navbar-form pull-left">
<input type="hidden" name="q" value="site:http://blog.jasonmeridth.com/"><input type="text" name="q" maxlength="255" results="0" placeholder="Search"></form>
<!-- End of custom search -->

                
                <ul class="nav pull-right"></ul></div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
    <article class="postbox post-text"><div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">PTOM: Single Responsibility Principle</h1>
    

    <hr><small>
        Posted: <time class="published dt-published" datetime="2008-03-30T00:21:00-05:00" itemprop="datePublished">Mar 30, 2008</time>
        
    

		
    

          |  
		
		
			<a href="index.md" id="sourcelink">Source</a>
		
		
    </small>
    <hr><div class="e-content" itemprop="articleBody text">
    <div><h4>The Single Responsibility Principle</h4>
<p>This post is about the first letter in Uncle Bob's SOLID acronym, <a href="http://www.objectmentor.com/resources/articles/srp.pdf">Single Responsibility Principle</a>, and a continuation of <a href="blogs/chad_myers/archive/2008/03/07/pablo-s-topic-of-the-month-march-solid-principles.aspx">The Los Techies Pablo's Topic of the Month - March: SOLID Principles</a>.  Sean has already <a href="http://www.lostechies.com/blogs/sean_chambers/archive/2008/03/15/ptom-single-responsibility-principle.aspx">posted</a> on this, but I'd like to "contribute".  <em><strong>Note about the SOLID acronym and this blog "storm"</strong>: This "principle" is more or less common sense, as are most of the other items in the SOLID acronym.  I like the idea of this series because I personally have interviewed with companies who would ask about possible code scenarios and I respond with one of these principles or one of the GOF patterns and they look back at me with a blank stare.  I know these are just labels, but if they can reduce the miscommunication possibilities and start standardizing our industry, I'm all for it.  I know some of the new ideas and labels out there are still being hammered out (i.e., like the BDD discussions as of late), but that is part of the process and what has to happen in such a young industry like ours.</em></p>
<blockquote>
<p>Single-Responsibility Principle (SRP):  A class should have only one reason to change.</p>
</blockquote>
<p>A good anti-example is the <a href="http://en.wikipedia.org/wiki/Active_record_pattern">Active Record pattern</a>.  This pattern is in contradiction of SRP.  A domain entity handles persistence of it's information. (Note: There is nothing wrong with using Active Record; I've recently used it on a quick demo site and it worked perfectly)  Normally, you would have a controller method/action pass a "hydrated" entity to a method of a repository instance.  Like my favorite quote says:</p>
<blockquote>
<p>Talk is cheap, show me the code ~ Linus Torvalds</p>
</blockquote>
<p>let's look at some .NET code.</p>
<h5><strong>Anti-SRP (Active Record)</strong></h5>
<p>Imagine you have a User entity that has a username and password property.  I'm using the Castle Active Record libraries for this example. [gist id=4542522 file=ptom_single_responsibility_example1.cs] </p>
<h5>As you can see you use attributes to dictate how your properties map to columns in your database table.  Your entity name usually matches your table name, when using just the ActiveRecord attribute with no explicit table name (i.e., [ActiveRecord("UserTableName")].</h5>
<p>To save the user you would take an instantiated user and just call user.Save();  This would cause an update to fire if the user instance had identity (aka an Id) and insert if it did not. </p>
<h5><strong>Translation to SRP</strong></h5>
<p>What I would normally do is have an architecture like the following: <img alt="image" src="jasonmeridth/files/WindowsLiveWriter/PTOMSingleResponsibilityPrinciple_13E55/image_4.png"> The UserRepository would be used by a web controller (I use monorail for my web projects), being passed a User instance, and Save(user) would be called. [gist id=4542559 file=ptom_single_responsibility_example2.cs] So, what it boils down to is that the user class now knows nothing on how it is persisted to the database. SRP is one of the hardest principles to enforce because there is always room for refactoring out one class to multiple; each class has one responsibility.  It is personal preference because class explosion does cause some people to become code zealots.  One of my other favorite quotes lately is: </p>
<blockquote>
<p>Always code as if the guy maintaining your code would be a violent psychopath and he knows where you live.</p>
</blockquote>
<p>Enjoy!</p>
<h3>Comments</h3>
<p><strong><a href=".#224" title="2008-11-18 12:48:53">Martin Odhelius</a>:</strong> The last pattern you are using actually looks like the Data Acess Object-pattern (DAO) http://en.wikipedia.org/wiki/Data_Access_Object and is in fact much better than the Active Record-pattern in most situations, especially when you want to handle several different data sources or when you want to migrate data between different db:s for example.</p></div>
    </div>
    
    </div>
    
    
        <ul class="pager"><li class="previous">
                <a href="../resharper-4-0-nightly-builds/" rel="prev">← Previous post</a>
            </li>
        
        
            <li class="next">
                <a href="../how-to-install-twhirl-on-ubuntu-7-10-gutsy-gibbon/" rel="next">Next post →</a>
            </li>
        
        </ul><div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="jasonmeridth",
        
            disqus_url="http://blog.jasonmeridth.com/posts/ptom-single-responsibility-principle/",
        
        disqus_title="PTOM: Single Responsibility Principle",
        disqus_identifier="cache/posts/ptom-single-responsibility-principle.html",
        disqus_config = function () {
            this.language = "";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
    

    

    
    
    

    </article></div>
    </div>
    <!--End of body content-->
</div>
<div class="footerbox">
    Contents © 2014         <a href="mailto:jason@jasonmeridth.com">Jason Meridth</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<br><br><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a>
</div>

    
        
            <script src="../../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../../assets/js/bootstrap.min.js" type="text/javascript"></script><script src="../../assets/js/jquery.colorbox-min.js" type="text/javascript"></script><!-- Social buttons --><div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul><li><a class="addthis_button_facebook"></a>
</li><li><a class="addthis_button_google_plusone_share"></a>
</li><li><a class="addthis_button_linkedin"></a>
</li><li><a class="addthis_button_twitter"></a>
</li></ul></div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script><!-- End of social buttons --><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});
    $(window).on('hashchange', function(){
        if (location.hash && $(location.hash)[0]) {
            $('body').animate({scrollTop: $(location.hash).offset().top - $('#navbar').outerHeight(true)*1.2 }, 1);
        }
    });
    $(document).ready(function(){$(window).trigger('hashchange')});
    </script></body></html>