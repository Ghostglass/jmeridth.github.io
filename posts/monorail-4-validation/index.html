<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta charset="utf-8"><meta name="author" content="Jason Meridth"><title>MonoRail #4: Validation | Jason Meridth's Blog</title><link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="../../assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"><link href="../../assets/css/rst.css" rel="stylesheet" type="text/css"><link href="../../assets/css/code.css" rel="stylesheet" type="text/css"><link href="../../assets/css/colorbox.css" rel="stylesheet" type="text/css"><link href="../../assets/css/theme.css" rel="stylesheet" type="text/css"><link rel="canonical" href="http://blog.jasonmeridth.com/posts/monorail-4-validation/"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml"></head><body>
<!-- Menubar -->
<div class="navbar navbar-fixed-top" id="navbar">
    <div class="navbar-inner">
        <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

            <a class="brand" href="http://blog.jasonmeridth.com/">
            Jason Meridth's Blog
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav"><li><a href="../../archive.html">Archives</a>
            
        
    
        
            
                </li><li><a href="../../categories/index.html">Tags</a>
            
        
    
        
            
                </li><li><a href="https://github.com/jmeridth"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/github.png" border="0"></a>
            
        
    
        
            
                </li><li><a href="http://twitter.com/jmeridth"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/twitter.png" border="0"></a>
            
        
    
        
            
                </li><li><a href="../../rss.xml"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/rss.png" border="0"></a>
            
        
    

                </li></ul><!-- Custom search with google--><form id="search" action="http://google.com/search" method="get" class="navbar-form pull-left">
<input type="hidden" name="q" value="site:http://blog.jasonmeridth.com/"><input type="text" name="q" maxlength="255" results="0" placeholder="Search"></form>
<!-- End of custom search -->

                
                <ul class="nav pull-right"></ul></div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
    <article class="postbox post-text"><div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">MonoRail #4: Validation</h1>
    

    <hr><small>
        Posted: <time class="published dt-published" datetime="2007-09-26T15:08:25-05:00" itemprop="datePublished">Sep 26, 2007</time>
        
    

		
    

          |  
		
		
			<a href="index.md" id="sourcelink">Source</a>
		
		
    </small>
    <hr><div class="e-content" itemprop="articleBody text">
    <div><p>This post was decided upon after watching <a href="http://hammett.castleproject.org/">Hammet</a>'s <a href="http://hammett.castleproject.org/wp-content/uploads/2007/01/mr%20formvalidation.html">screencast</a> on using attribute-based validation in MonoRail.</p>
<p><strong>*NOTE</strong>: I do not agree with embedding validation into the domain model.  I would prefer a service handle this, but I'm utilizing the validation that is in the framework.  I've been skimming some of Bill McCafferty's MonoRail posts and have seen him use items like fValidate, but haven't had an opportunity to use them.  Anyone have any preferences?</p>
<p>Be aware that I'm using the latest trunk code: <a href="http://builds.castleproject.org/cruise/index.castle">Get it here from the Castle MonoRail build server</a>.</p>
<p>First, you need a reference to Castle.Components.Validator in your project:<br><img alt="image" src="jasonmeridth/files/2011/03MonoRail4Validation_11854/image_thumb.png"></p>
<h3>THE MODEL:</h3>
<p>Next, you need to add the necessary attributes to the domain entity's properties:  </p>
<div class="code"><pre>   <span class="mi">1</span><span class="o">:</span> <span class="n">using</span> <span class="n">Castle</span><span class="p">.</span><span class="n">Components</span><span class="p">.</span><span class="n">Validator</span><span class="p">;</span>


   <span class="mi">2</span><span class="o">:</span>


   <span class="mi">3</span><span class="o">:</span> <span class="n">namespace</span> <span class="n">JasonMeridth</span><span class="p">.</span><span class="n">Models</span>


   <span class="mi">4</span><span class="o">:</span> <span class="p">{</span>


   <span class="mi">5</span><span class="o">:</span>     <span class="n">public</span> <span class="n">class</span> <span class="n">Contact</span>


   <span class="mi">6</span><span class="o">:</span>     <span class="p">{</span>


   <span class="mi">7</span><span class="o">:</span>         <span class="n">private</span> <span class="n">string</span> <span class="n">name</span><span class="p">;</span>


   <span class="mi">8</span><span class="o">:</span>         <span class="n">private</span> <span class="n">string</span> <span class="n">email</span><span class="p">;</span>


   <span class="mi">9</span><span class="o">:</span>         <span class="n">private</span> <span class="n">string</span> <span class="n">message</span><span class="p">;</span>


  <span class="mi">10</span><span class="o">:</span>


  <span class="mi">11</span><span class="o">:</span>         <span class="p">[</span><span class="n">ValidateNonEmpty</span><span class="p">(</span><span class="s">"Name is a required field"</span><span class="p">)</span>
</pre></div>


<h3>Comments</h3>
<p><strong><a href=".#127" title="2007-09-26 17:08:12">cramsay</a>:</strong> Hi Jason, Did the error you were getting in IE7 match the one in that blog post? AFAIK the MR validation uses this library: http://www.tetlaw.id.au/view/javascript/really-easy-field-validation That in turn uses prototype, which should be able to handle inserting stuff in IE7 with ease. I assume the error was happening when the validation messages were trying to appear?</p>
<p><strong><a href=".#128" title="2007-09-26 19:38:08">Jason Meridth</a>:</strong> I did comment on Hammett's post but can't find the comment. Did he update the blog entry? Where is it exactly? Nice post on validation. I will definitely try it out. Yes, the error was appearing when the messages were trying to appear.</p>
<p><strong><a href=".#129" title="2007-09-26 20:21:19">Joe Ocampo</a>:</strong> Nice post... Don't know how crazy I am about decorating my Domain object with validation constructs BUT I am in simplification rehab for this. (mumbling to self) must simplify, it will be ok. must simplify, its ok..... :-)</p>
<p><strong><a href=".#130" title="2007-09-26 22:07:00">Sean Chambers</a>:</strong> Jason, Very detailed post! I agree with Joe that I cringe at the idea of decorating domain objects with validation attributes. Although I have done quite a bit of research and thought about it alot without coming up with a better scenario without creating more headaches as a result. At one point in a recent project I had a generic ValidationBase controller that the controller derived from and I could then call a Validate method returning errors if not passed. This was for a Controller Wizard, hence the generics. I have been thinking about this a lot recently so perhaps I can come up with an alternative. Great post, keep it up!</p>
<p><strong><a href=".#131" title="2007-09-27 00:03:59">Jason Meridth</a>:</strong> I completely agree with you and Joe, hence my second opening paragraph. I love the idea of a ValidationBase controller. I'm check out Colin's javascript validation stuff and I look forward to posts about your base validation mechanism. Excellent!</p>
<p><strong><a href=".#132" title="2007-09-27 00:51:41">joeyDotNet</a>:</strong> Well I'd agree mostly about not wanting to put a bunch of validation attributes on domain objects. BUT! Like Joe, I too have been applying the "replace unnecessary complexity wth simplification" refactoring to myself for a while now. (Hmm, refactoring <em>yourself</em>, smells like a blog post...) :) And it's all the Castle project's fault when I saw the simplicity of how quickly you could get a decently designed web app up and running using MonoRail + ActiveRecord. Now that I'm digging into RoR, it's like that whole Castle MR + AR experience all over again, but this time it's like X 10. There really is just something beautiful about having lines like this in your domain object: <code>validates_presence_of :title validates_numericality_of :quantity</code> especially when you can constrain them like this: <code>validates_presence_of :title :on =&gt; :create</code> I dunno. It's definitely starting to grow on me. And I have a feeling that an Active Record implementation in a dynamic language is completely different than in a static language when it comes corrupting your design. But, I'm still learning... (Sorry this kinda turned into a AR comment, but is kinda along the same lines...)</p>
<p><strong><a href=".#133" title="2008-03-05 12:04:29">deman</a>:</strong> Jason, I'm waiting for your authentication post. Or did I miss it somewhere? Thank you.</p>
<p><strong><a href=".#134" title="2008-10-23 15:09:54">Isidro</a>:</strong> I'm having troubles with regex validations. If I put any kind of regexes in the validators the validation stops working! Is this a know issue?</p>
<p><strong><a href=".#135" title="2008-10-28 12:11:28">Jason Meridth</a>:</strong> @ isidro Whenever that happens to me, it isn't the Monorail Validator, it's my regex. I use Roy Osherove's Regulator tool to test my regex queries and that usually straightens me out. Hope this helps.</p></div>
    </div>
    
    </div>
    
    
        <ul class="pager"><li class="previous">
                <a href="../domain-model-overuse-post-by-david-laribee-on-codebetter/" rel="prev">← Previous post</a>
            </li>
        
        
            <li class="next">
                <a href="../be-kind-to-your-testers/" rel="next">Next post →</a>
            </li>
        
        </ul><div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="jasonmeridth",
        
            disqus_url="http://blog.jasonmeridth.com/posts/monorail-4-validation/",
        
        disqus_title="MonoRail #4: Validation",
        disqus_identifier="cache/posts/monorail-4-validation.html",
        disqus_config = function () {
            this.language = "";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
    

    

    
    
    

    </article></div>
    </div>
    <!--End of body content-->
</div>
<div class="footerbox">
    Contents © 2014         <a href="mailto:jason@jasonmeridth.com">Jason Meridth</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<br><br><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a>
</div>

    
        
            <script src="../../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../../assets/js/bootstrap.min.js" type="text/javascript"></script><script src="../../assets/js/jquery.colorbox-min.js" type="text/javascript"></script><!-- Social buttons --><div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul><li><a class="addthis_button_facebook"></a>
</li><li><a class="addthis_button_google_plusone_share"></a>
</li><li><a class="addthis_button_linkedin"></a>
</li><li><a class="addthis_button_twitter"></a>
</li></ul></div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script><!-- End of social buttons --><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});
    $(window).on('hashchange', function(){
        if (location.hash && $(location.hash)[0]) {
            $('body').animate({scrollTop: $(location.hash).offset().top - $('#navbar').outerHeight(true)*1.2 }, 1);
        }
    });
    $(document).ready(function(){$(window).trigger('hashchange')});
    </script></body></html>