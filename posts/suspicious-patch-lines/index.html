<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Suspicious Patch Lines | Jason Meridth's Blog</title>

                <link href="../../assets/css/bitter.css" rel="stylesheet" type="text/css">
        <link href="../../assets/css/main.css" rel="stylesheet" type="text/css">
        <link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
        <link href="../../assets/css/code.css" rel="stylesheet" type="text/css">

                <link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">

      <link rel="canonical" href="http://blog.jasonmeridth.com/posts/suspicious-patch-lines/">



    
        <!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->

    

    
    <meta name="author" content="Jason Meridth">
            <meta name="og:title" content="Suspicious Patch Lines">
        <meta name="og:url" content="http://blog.jasonmeridth.com/posts/suspicious-patch-lines/">
            <meta name="og:description" content="DISCLAIMER: This is only relevant if you or someone contributing to your project are doing cross-platform development. If you are typically just developing on Windows, you should be able to keep the c">
        <meta name="og:site_name" content="Jason Meridth's Blog">
        <meta name="og:type" content="article">

    
    

</head>
<body>
    <section class="social">
        <ul>
                    <li><a href="../../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="https://github.com/jmeridth" title="Github"><i class="icon-github"></i></a></li>
            <li><a href="https://twitter.com/jmeridth" title="Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="http://jasonmeridth.com" title="About Me"><i class="icon-user"></i></a></li>
            <li><a href="../../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>

        </ul>
    </section>
    <section class="page-content">
        <div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">Suspicious Patch Lines</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2010-02-27T19:21:00-06:00">Feb 27, 2010</time>
            
            
            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../categories/git/" rel="tag">git</a></li>
        </ul>
        </div>

        </div>
        <div class="body">
            <p>DISCLAIMER: This is <em>only</em> relevant if you or someone contributing to your project are doing cross-platform development. If you are typically just developing on Windows, you should be able to keep the config options set to false.</p>
<h3>The Problem</h3>
<p>While trying to commit changes to a file I have under source control with Git on a Windows box using cygwin, I received the following error:</p>
<pre class="code literal-block">jmeridth@web1 /cygdrive/d/site
<span class="nv">$ </span>git commit -am <span class="s2">"changed the README to show authors"</span>
*
* You have some suspicious patch lines:
*
* In README
* trailing whitespace <span class="o">(</span>line 26<span class="o">)</span>
README:26:
</pre>


<p>This type of error has been discussed quite a bit amongst .NET developers who are transitioning to Git. It has to due with the difference in handling of newlines between Windows and the Mac/*nix world. There are five solutions to this:</p>
<p>1) Run the following from inside the repository: (the one I usually use, due to my cross-platform development)</p>
<pre class="code literal-block">git config core.autocrlf <span class="nb">true</span>
git confit core.safecrlf <span class="nb">true</span>
</pre>


<p>The <a href="http://help.github.com/dealing-with-lineendings/">Github Help Pages</a> provide an excellent explanation about this. Also read the <a href="http://www.kernel.org/pub/software/scm/git-core/docs/git-config.html">direct documentation from git-core</a>. This makes Git convert CRLF at the end of lines in the text files to LF when reading from the filesystem, and convert in reverse when writing to the filesystem. Just be aware also that if you do set this and one of your stored binary files is accidentally marked as text, there is a chance for it to become corrupted.</p>
<p>2) Edit the .git/hooks/pre-commit file and comment out the following lines:</p>
<pre class="code literal-block"><span class="k">if</span> <span class="o">(</span>/s<span class="nv">$/</span><span class="o">){</span>
  bad_line<span class="o">(</span><span class="s2">"trailing whitespace"</span>, <span class="nv">$_</span><span class="o">)</span>
<span class="o">}</span>
</pre>


<p>The reason why this is a problem is because there is a space (s in posix regex) just before the end of the line (aka a trailing whitespace). Normally this file wouldn’t fire off unless you made it executable, but on Windows all of the git hooks run because there is no concept of whether they are executable or not, they all are by default. On Mac/*nix Git repositories, you need to “chmod +x” (change to executable) the git hook files before Git will run them.</p>
<p>3) When commiting do the following:</p>
<pre class="code literal-block">git commit --no-verify
</pre>


<p>and the pre-commit hook will be ignored.</p>
<p>4) Rename/Move/Delete the .git/hooks/pre-commit file</p>
<pre class="code literal-block">mv .git/hooks/pre-commit .git/hooks/pre-commit.stop_working
</pre>


<p>5) Change the permissions on the .git/hooks/pre-commit file. In this case, I’m clearing the executable bit for all users (owner, group and rest of the world)</p>
<pre class="code literal-block">chmod a-x .git/hooks/pre-commit
</pre>
        </div>
                <ul class="pager">
            <li class="previous">
                <a href="../pair-programming-with-screen/" rel="prev" title="Pair Programming with Screen">Previous post</a>
            </li>
            <li class="next">
                <a href="../git-post-merge-hook-to-auto-fire-rails-migrations/" rel="next" title="Git post-merge hook to auto-fire rails migrations">Next post</a>
            </li>
        </ul>

                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="jasonmeridth",
            disqus_url="http://blog.jasonmeridth.com/posts/suspicious-patch-lines/",
        disqus_title="Suspicious Patch Lines",
        disqus_identifier="cache/posts/suspicious-patch-lines.html",
        disqus_config = function () {
            this.language = "";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        
    </div>
                    <footer id="footer" role="contentinfo">
            <p>Contents © 2014         <a href="mailto:jason@jasonmeridth.com">Jason Meridth</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<br><br>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a></p>
            
        </footer>

        </div>
    </section>
    
    
                <script src="../../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script>
            <script src="../../assets/js/jquery.timeago.js" type="text/javascript"></script>
    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


        <script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
