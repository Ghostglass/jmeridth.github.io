<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta charset="utf-8"><meta name="author" content="Jason Meridth"><title>Suspicious Patch Lines | Jason Meridth's Blog</title><link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="../../assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"><link href="../../assets/css/rst.css" rel="stylesheet" type="text/css"><link href="../../assets/css/code.css" rel="stylesheet" type="text/css"><link href="../../assets/css/colorbox.css" rel="stylesheet" type="text/css"><link href="../../assets/css/theme.css" rel="stylesheet" type="text/css"><link rel="canonical" href="http://blog.jasonmeridth.com/posts/suspicious-patch-lines/"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml"></head><body>
<!-- Menubar -->
<div class="navbar navbar-fixed-top" id="navbar">
    <div class="navbar-inner">
        <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

            <a class="brand" href="http://blog.jasonmeridth.com/">
            Jason Meridth's Blog
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav"><li><a href="../../archive.html">Archives</a>
            
        
    
        
            
                </li><li><a href="../../categories/index.html">Tags</a>
            
        
    
        
            
                </li><li><a href="https://github.com/jmeridth"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/github.png" border="0"></a>
            
        
    
        
            
                </li><li><a href="http://twitter.com/jmeridth"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/twitter.png" border="0"></a>
            
        
    
        
            
                </li><li><a href="../../rss.xml"><img src="http://b038a8f209e36fc36fba-a9b634eed6b534d774260bd8467c190d.r61.cf1.rackcdn.com/rss.png" border="0"></a>
            
        
    

                </li></ul><!-- Custom search with google--><form id="search" action="http://google.com/search" method="get" class="navbar-form pull-left">
<input type="hidden" name="q" value="site:http://blog.jasonmeridth.com/"><input type="text" name="q" maxlength="255" results="0" placeholder="Search"></form>
<!-- End of custom search -->

                
                <ul class="nav pull-right"></ul></div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
    <article class="postbox post-text"><div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">Suspicious Patch Lines</h1>
    

    <hr><small>
        Posted: <time class="published dt-published" datetime="2010-02-27T19:21:00-06:00" itemprop="datePublished">Feb 27, 2010</time>
        
    

		
    
          |  More posts about
        
            <a class="tag" href="../../categories/git.html"><span class="badge badge-info">git</span></a>
        
    

          |  
		
		
			<a href="index.md" id="sourcelink">Source</a>
		
		
    </small>
    <hr><div class="e-content" itemprop="articleBody text">
    <div><p>DISCLAIMER: This is <em>only</em> relevant if you or someone contributing to your project are doing cross-platform development. If you are typically just developing on Windows, you should be able to keep the config options set to false.</p>
<h3>The Problem</h3>
<p>While trying to commit changes to a file I have under source control with Git on a Windows box using cygwin, I received the following error:</p>
<div class="code"><pre>jmeridth@web1 /cygdrive/d/site
<span class="nv">$ </span>git commit -am <span class="s2">"changed the README to show authors"</span>
*
* You have some suspicious patch lines:
*
* In README
* trailing whitespace <span class="o">(</span>line 26<span class="o">)</span>
README:26:
</pre></div>


<p>This type of error has been discussed quite a bit amongst .NET developers who are transitioning to Git. It has to due with the difference in handling of newlines between Windows and the Mac/*nix world. There are five solutions to this:</p>
<p>1) Run the following from inside the repository: (the one I usually use, due to my cross-platform development)</p>
<div class="code"><pre>git config core.autocrlf <span class="nb">true</span>
git confit core.safecrlf <span class="nb">true</span>
</pre></div>


<p>The <a href="http://help.github.com/dealing-with-lineendings/">Github Help Pages</a> provide an excellent explanation about this. Also read the <a href="http://www.kernel.org/pub/software/scm/git-core/docs/git-config.html">direct documentation from git-core</a>. This makes Git convert CRLF at the end of lines in the text files to LF when reading from the filesystem, and convert in reverse when writing to the filesystem. Just be aware also that if you do set this and one of your stored binary files is accidentally marked as text, there is a chance for it to become corrupted.</p>
<p>2) Edit the .git/hooks/pre-commit file and comment out the following lines:</p>
<div class="code"><pre><span class="k">if</span> <span class="o">(</span>/s<span class="nv">$/</span><span class="o">){</span>
  bad_line<span class="o">(</span><span class="s2">"trailing whitespace"</span>, <span class="nv">$_</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>


<p>The reason why this is a problem is because there is a space (s in posix regex) just before the end of the line (aka a trailing whitespace). Normally this file wouldn’t fire off unless you made it executable, but on Windows all of the git hooks run because there is no concept of whether they are executable or not, they all are by default. On Mac/*nix Git repositories, you need to “chmod +x” (change to executable) the git hook files before Git will run them.</p>
<p>3) When commiting do the following:</p>
<div class="code"><pre>git commit --no-verify
</pre></div>


<p>and the pre-commit hook will be ignored.</p>
<p>4) Rename/Move/Delete the .git/hooks/pre-commit file</p>
<div class="code"><pre>mv .git/hooks/pre-commit .git/hooks/pre-commit.stop_working
</pre></div>


<p>5) Change the permissions on the .git/hooks/pre-commit file. In this case, I’m clearing the executable bit for all users (owner, group and rest of the world)</p>
<div class="code"><pre>chmod a-x .git/hooks/pre-commit
</pre></div></div>
    </div>
    
    </div>
    
    
        <ul class="pager"><li class="previous">
                <a href="../pair-programming-with-screen/" rel="prev">← Previous post</a>
            </li>
        
        
            <li class="next">
                <a href="../git-post-merge-hook-to-auto-fire-rails-migrations/" rel="next">Next post →</a>
            </li>
        
        </ul><div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="jasonmeridth",
        
            disqus_url="http://blog.jasonmeridth.com/posts/suspicious-patch-lines/",
        
        disqus_title="Suspicious Patch Lines",
        disqus_identifier="cache/posts/suspicious-patch-lines.html",
        disqus_config = function () {
            this.language = "";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
    

    

    
    
    

    </article></div>
    </div>
    <!--End of body content-->
</div>
<div class="footerbox">
    Contents © 2014         <a href="mailto:jason@jasonmeridth.com">Jason Meridth</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<br><br><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a>
</div>

    
        
            <script src="../../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../../assets/js/bootstrap.min.js" type="text/javascript"></script><script src="../../assets/js/jquery.colorbox-min.js" type="text/javascript"></script><!-- Social buttons --><div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul><li><a class="addthis_button_facebook"></a>
</li><li><a class="addthis_button_google_plusone_share"></a>
</li><li><a class="addthis_button_linkedin"></a>
</li><li><a class="addthis_button_twitter"></a>
</li></ul></div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script><!-- End of social buttons --><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});
    $(window).on('hashchange', function(){
        if (location.hash && $(location.hash)[0]) {
            $('body').animate({scrollTop: $(location.hash).offset().top - $('#navbar').outerHeight(true)*1.2 }, 1);
        }
    });
    $(document).ready(function(){$(window).trigger('hashchange')});
    </script></body></html>