<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="description" content="Learn, Converse, Share">
    <meta name="viewport" content="width=device-width">
    <title>Jason Meridth's Blog | Jason Meridth's Blog</title>

                <link href="assets/css/bitter.css" rel="stylesheet" type="text/css">
        <link href="assets/css/main.css" rel="stylesheet" type="text/css">
        <link href="assets/css/rst.css" rel="stylesheet" type="text/css">
        <link href="assets/css/code.css" rel="stylesheet" type="text/css">

                <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">

      <link rel="canonical" href="http://blog.jasonmeridth.com/">



    
        <!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->

    


</head>
<body>
    <section class="social">
        <ul>
                    <li><a href="#" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="http://jasonmeridth.com" title="About Me"><i class="icon-user"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="https://github.com/jmeridth" title="Github"><i class="icon-github"></i></a></li>
            <li><a href="https://twitter.com/jmeridth" title="Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>

        </ul>
    </section>
    <section class="page-content">
        <div class="content" rel="main">
        <div class="post">
            <h1 class="title"><a href="posts/why-i-blog/">Why I Blog</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-10-03T09:43:14-05:00">Oct 03, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/why-i-blog/#disqus_thread" data-disqus-identifier="cache/posts/why-i-blog.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/information/" rel="tag">information</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>I've been asked recently why I blog.  My answer is the same since I started blogging back in 2006.  I blog for three reasons.</p>
<ol>
<li>I figured out a problem/issue I was having and want to share the knowledge.  If I had the problem/issue, someone else will and hopefully google will link to my post and help them when they are searching. What I've also experienced is someone reads my post and comments with a better and/or more efficient solution.  I then can link to their comment/post or update my own.  I love that sense of community.</li>
<li>I will use a different part of my brain to write the post and, therefore (hopefully), remember the solution better next time this particular problem/issue arises.</li>
<li>I want to store the solution online, not only on my local computer (aka isolation), so that I, and others, can reference it in the future.</li>
</ol>
<p>I <strong>DO NOT</strong> blog because I think it will make me popular or because I want to seem smarter than anyone else.  I enjoy learning and sharing information.</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/when-git-or-ssh-protocols-blocked/">When Git or SSH Protocols Blocked</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-08-26T08:47:42-05:00">Aug 26, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/when-git-or-ssh-protocols-blocked/#disqus_thread" data-disqus-identifier="cache/posts/when-git-or-ssh-protocols-blocked.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/git/" rel="tag">git</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>Recently I had issues connecting to <a href="http://github.com/roaet">Github</a> because of some firewall restrictions outside my control.  The firewall had outbound SSH (port 22) blocked.  My co-worker <a href="https://github.com">Justin Hammond</a> found a git config option that lets you force all git commands to use <code>https://</code> (port 443) instead of <code>git://</code> (port 22).</p>
<pre class="code literal-block">git config --global url.<span class="s2">"https://"</span>.insteadOf git://
</pre>


<p>Worked like a charm.  Thanks Justin.  Hope this helps someone else.</p>
<p>NB: Don't use <code>--global</code> if you don't want this applied to all repositories.  Without it only sets for the current repository you're in.</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/weechat-keyboard-shortcuts/">Weechat keyboard shortcuts</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-03-14T23:52:39-05:00">Mar 14, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/weechat-keyboard-shortcuts/#disqus_thread" data-disqus-identifier="cache/posts/weechat-keyboard-shortcuts.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/cli/" rel="tag">cli</a></li>
           <li><a class="tag p-category" href="categories/irc/" rel="tag">irc</a></li>
           <li><a class="tag p-category" href="categories/weechat/" rel="tag">weechat</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>I've switched from using irssi to <a href="http://weechat.org">Weechat</a> since I rejoined the ranks as a <a href="http://www.rackspace.com">Racker</a>.</p>
<p><a href="https://github.com/jmeridth/dotfiles/blob/master/weechat.conf">Here</a> is my current weechat.conf file</p>
<p>Some of the ones I use often:</p>
<ul>
<li>ctrl+h - window left</li>
<li>ctrl+j - window down</li>
<li>ctrl+k - window up</li>
<li>ctrl+l - window right</li>
<li>ctrl+z - window zoom (make current small window full screen)</li>
<li>ctrl+n - next buffer</li>
<li>ctrl+p - previous buffer</li>
<li>ctrl+y - clipboard paste</li>
<li>ctrl+r - search</li>
<li>ctrl+[j|m] - stop search</li>
</ul>
<p>normal commands not included with my weechat.conf that I use:</p>
<ul>
<li>/window resize <number> - resizes window to that percentage</number>
</li>
<li>/buffer clear - clears the buffer, i use this often with the <a href="http://weechat.org/scripts/source/highmon.pl.html/">highlight monitor plugin</a>
</li>
<li>/buffer merge <other buffer number> - merges two buffers into one (use ctrl+x to switch between them)</other>
</li>
<li>/buffer unmerge - unmerge the buffer you're currently on out to its own</li>
</ul>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/where-i-go-to-choose-an-open-source-license/">Where I Go To Choose An Open Source License</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-03-14T23:50:13-05:00">Mar 14, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/where-i-go-to-choose-an-open-source-license/#disqus_thread" data-disqus-identifier="cache/posts/where-i-go-to-choose-an-open-source-license.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/open-source/" rel="tag">open source</a></li>
           <li><a class="tag p-category" href="categories/resources/" rel="tag">resources</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>I go to <a href="http://choosealicense.com">choosealicense.com</a> to refresh my memory on open source licenses.  <a href="http://choosealicense.com/licenses/mit/">MIT</a> is usually my favorite.</p>
<p>A good resource, in my opinion</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/how-to-get-the-sha-of-the-last-commit-on-a-branch-with-git/">How to Get The SHA of The Last Commit on a Branch With Git</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-03-11T02:30:23-05:00">Mar 11, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/how-to-get-the-sha-of-the-last-commit-on-a-branch-with-git/#disqus_thread" data-disqus-identifier="cache/posts/how-to-get-the-sha-of-the-last-commit-on-a-branch-with-git.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/git/" rel="tag">git</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>I've been asked this a few times and have had to do it lately a few times.</p>
<p>To get the SHA of the last commit from a specific branch, use <a href="http://git-scm.com/docs/git-rev-parse"><code>git rev-parse</code></a></p>
<p><code>git rev-parse origin/master</code> (remote branch)</p>
<p>or </p>
<p><code>git rev-parse master</code> (local branch)</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/how-to-run-a-single-test-with-tox/">How to Run a Single Test With Tox</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-03-07T04:49:53-06:00">Mar 07, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/how-to-run-a-single-test-with-tox/#disqus_thread" data-disqus-identifier="cache/posts/how-to-run-a-single-test-with-tox.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/cli/" rel="tag">cli</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
           <li><a class="tag p-category" href="categories/testing/" rel="tag">testing</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>I have to run a single python test once in a while and keep forgetting how to do it with Tox.</p>
<p>Here it is:</p>
<pre class="code literal-block">tox -e py27 -- project_name_here/tests/folder_name1_here/folder_name2_here/test_file_name_here.py:TestClassName.test_method_name
</pre>


<p>Hope this helps someone else.</p>
<p>Happy bit twiddling.</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/personal-vim-cheatsheet/">Personal VIM Cheatsheet</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-03-03T16:21:02-06:00">Mar 03, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/personal-vim-cheatsheet/#disqus_thread" data-disqus-identifier="cache/posts/personal-vim-cheatsheet.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/cli/" rel="tag">cli</a></li>
           <li><a class="tag p-category" href="categories/vim/" rel="tag">vim</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>Will be adding to this post as I learn/remember shortcuts</p>
<ul>
<li>
<code>.</code> - repeat last command in normal mode</li>
<li>
<code>@:</code> then <code>@@</code> - repeat last command entered with <code>:</code> <a href="http://vim.wikia.com/wiki/Repeat_last_colon_command">source</a>
</li>
<li>
<code>#</code> - find all occurances of the word I'm currently on</li>
<li>
<code>dfc</code> - delete everything including the letter 'c'</li>
<li>
<code>dtc</code> - delete everything up to the letter 'c'</li>
<li>shift+h - go to top of screen</li>
<li>shift+m - go to middle of screen</li>
<li>shift+l - go to bottom of screen</li>
<li>ctrl+v [h|j|k|l]` - highlight indeividual items (great for highlighting column(s)</li>
<li>
<code>gUiw</code> - capitalize the current word</li>
<li>
<code>gUU</code> - capitalize current line</li>
<li>
<code>vU</code> - capitalize current character</li>
<li>
<code>guiw</code> - lowercase the current word</li>
<li>
<code>guu</code> - lowercase the current line</li>
<li>
<code>vu</code> - lowercase current character</li>
</ul>
<p>keybindings I use all the time via mappgings in my <a href="https://github.com/jmeridth/dotfiles/blob/master/.vimrc">.vimrc</a></p>
<ul>
<li>
<code>,v</code> - create vertical split</li>
<li>
<code>,h</code> - create horizontal split</li>
<li>ctrl+j - go to split below/down</li>
<li>ctrl+h - go to split on left</li>
<li>ctrl+k - go to split above/up</li>
<li>ctrl+l - go to split on right</li>
</ul>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/using-sed-and-regex-to-remove-prefix-on-filenames/">Using sed and regex to Remove Prefix on Filenames</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-02-24T21:39:00-06:00">Feb 24, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/using-sed-and-regex-to-remove-prefix-on-filenames/#disqus_thread" data-disqus-identifier="cache/posts/using-sed-and-regex-to-remove-prefix-on-filenames.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/command-line/" rel="tag">command line</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>I used <a href="https://github.com/dreikanter/wp2md">wp2md</a> recently to generate <a href="http://daringfireball.net/projects/markdown/">markdown</a> files out of my wordpress posts so that I could migrate to a static blog generator (like <a href="http://getnikola.com">Nikola</a>, the one I chose to use on this blog).  However, this exported the files with a prefixing datetime stamp (e.g., 20140224-blog-title.md)</p>
<p>I have used <a href="http://www.gnu.org/software/sed/manual/sed.html">sed</a> many times from my command line toolbox to rename files or content inside of files.  Here is how I removed the prefixing datetime stamp from my filenames.</p>
<pre class="code literal-block"><span class="k">for </span>f in *.md; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$f</span> | sed -r <span class="s1">'s/.*(\d*)-(.*\.md)/\2/'</span>; <span class="k">done</span>
</pre>


<ul>
<li>the for loop iterates over just my mardown files (files with the md extension)</li>
<li>I echo out the filename into the sed command line tool via a pipe, you can send the results of one command to the input of another by piping them together (e.e., command1 | command2)</li>
<li>Then I setup the regex s/old_string/new_string/<ul>
<li>I've learned when using group matching (the sections in the parenthses) and trying to replace the old_string with an entirely new string, you need to start the old_string with .*.  This causes the entire line to be replaced with the contents of the new string</li>
<li>old_string regex<ul>
<li>(\d*) - first group match - any digit, 1 or more times</li>
<li>"-" - a hyphen separating the match groups</li>
<li>(.*.md) - second group match - anything, ending in .md</li>
</ul>
</li>
<li>new_string regex<ul>
<li>\2 - replace the entire old string with the contents of the second group match</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Example</p>
<p><code>20140224-test-driven-development.md</code> becomes <code>test-driven-development.md</code></p>
<p>NB: the ; do and ; done are just bash scripting loop notation when put onto one line.  This script could have also been written as</p>
<pre class="code literal-block"><span class="k">for </span>f in *.md; <span class="k">do</span>
<span class="k">    </span><span class="nb">echo</span> <span class="nv">$f</span> | sed -r <span class="s1">'s/.*(\d*)-(.*\.md)/\2/'</span>
<span class="k">done</span>
</pre>


<p>I am aware that <a href="http://getnikola.com">Nikola</a> has a <a href="http://getnikola.com/handbook.html#importing-your-wordpress-site-into-nikola">wordpress importer</a>, but it imports the files to <em>.wp and </em>.meta.  I wanted <a href="http://daringfireball.net/projects/markdown/">markdown</a> files (*.md)</p>
<p>NB: I also use <a href="http://rubular.com">Rubular.com</a> or <a href="https://pythex.org">Pythex</a> all the time to test out my regex expressions.  You should check them out.</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/consolidated-my-blogs/">Consolidated My Blogs</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2014-02-24T05:43:14-06:00">Feb 24, 2014</time>
                </div>
                <div class="stats">
                                <a href="posts/consolidated-my-blogs/#disqus_thread" data-disqus-identifier="cache/posts/consolidated-my-blogs.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/notification/" rel="tag">notification</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>I finally consolidate my blogs that were located at:</p>
<ul>
<li>
<a href="http://jason.lostechies.com">http://jason.lostechies.com</a> - old posts</li>
<li>
<a href="http://blog.jasonmeridth.com">http://blog.jasonmeridth.com</a> - current posts</li>
</ul>
<p>and unified them here.  I also decided to move to <a href="http://getnikola.com">Nikola</a> since I'm coding in Python full-time now and it is a nice Python Static Site Generator.  New posts and theme changes coming soon.</p>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/using-default-scope-and-unscoped-in-rails/">Using Default Scope and Unscoped in Rails</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-04-02T00:00:00-05:00">Apr 02, 2013</time>
                </div>
                <div class="stats">
                                <a href="posts/using-default-scope-and-unscoped-in-rails/#disqus_thread" data-disqus-identifier="cache/posts/using-default-scope-and-unscoped-in-rails.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/rails/" rel="tag">rails</a></li>
        </ul>
        </div>

            </div>
            <div class="body">
                <p>I recently had the need to add a deleted flag to a model in a Rails project. I am usually of the mindset “explicit over implicit” so whenever I needed to use a finder to get content for that model I would do something like:</p>
<pre class="code literal-block"><span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">deleted</span><span class="p">:</span> <span class="kp">false</span><span class="p">)</span>
</pre>


<p>That does lean towards not having DRY (don’t repeat yourself) code. It’s a balancing act. I decided to give default_scope a chance this time. I quickly experienced the downside of that choice. I added the default_scope to my model:</p>
<pre class="code literal-block"><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
  <span class="n">default_scope</span> <span class="n">where</span><span class="p">(</span><span class="ss">deleted</span><span class="p">:</span> <span class="kp">false</span><span class="p">)</span>
<span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>
</pre>


<p>Well, I needed to write a migration to add the column and then update any existing records to have a default value of false. I generated my migration and added the following:</p>
<pre class="code literal-block"><span class="k">class</span> <span class="nc">AddDeletedFlagToUsers</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Migration</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">add_column</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">:deleted</span><span class="p">,</span> <span class="ss">:boolean</span><span class="p">,</span> <span class="ss">:default</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="kp">false</span>
    <span class="no">User</span><span class="o">.</span><span class="n">update_all</span> <span class="o">[</span><span class="s2">"deleted = ?"</span><span class="p">,</span> <span class="kp">false</span><span class="o">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>


<p>However, when I looked at the database, none of the pre-existing records had false as their deleted flag. I went to the rails console and typed in the update_all command again:</p>
<pre class="code literal-block"><span class="no">User</span><span class="o">.</span><span class="n">update_all</span> <span class="o">[</span><span class="s2">"deleted = ?"</span><span class="p">,</span> <span class="kp">false</span><span class="o">]</span>
</pre>


<p>and that’s when I saw how default_scope can bite you in the butt:</p>
<pre class="code literal-block">~/code/project<span class="o">(</span>master<span class="o">)</span> &amp;gt; rails c
Loading development environment <span class="o">(</span>Rails 3.2.12<span class="o">)</span>
&gt;&gt; User.update_all <span class="o">[</span><span class="s2">"deleted = ?"</span>, <span class="nb">false</span><span class="o">]</span>
  SQL <span class="o">(</span>35.9ms<span class="o">)</span>  UPDATE <span class="s2">"users"</span> SET <span class="nv">deleted</span> <span class="o">=</span> <span class="s1">'f'</span> WHERE <span class="s2">"users"</span>.<span class="s2">"deleted"</span> <span class="o">=</span> <span class="s1">'f'</span>
<span class="o">=</span>&gt; 0
</pre>


<p>Notice the <code>WHERE</code> clause. That is what the default_scope adds automatically. Duh!! So in order to bypass the default_scope I had to use <code>unscoped</code>:</p>
<pre class="code literal-block"><span class="no">User</span><span class="o">.</span><span class="n">unscoped</span><span class="o">.</span><span class="n">update_all</span> <span class="o">[</span><span class="s2">"deleted = ?"</span><span class="p">,</span> <span class="kp">false</span><span class="o">]</span>
</pre>


<p>in my migration. That then caused all existing records to be updated.</p>
<p>Yes, I’m aware this violates “Explicit over implicit” but it does keep my code “DRY (do not repeat yourself)”. There are pros and cons to all tools. Use them wisely.  </p>
            </div>
        </div>
            <nav class="postindexpager">
        <ul class="pager">
            <li class="next">
                <a href="index-24.html" rel="next">Older posts</a>
            </li>
        </ul>
        </nav>

                   <script>var disqus_shortname="jasonmeridth";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>


    
                    <footer id="footer" role="contentinfo">
            <p>Contents © 2014         <a href="mailto:jason@jasonmeridth.com">Jason Meridth</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>

        </div>
    </section>
    
    
                <script src="assets/js/jquery-1.10.2.min.js" type="text/javascript"></script>
            <script src="assets/js/jquery.timeago.js" type="text/javascript"></script>
    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


        <script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
