<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Git reset, checkout & "bare double dash", and revert &#8211; Jason Meridth</title>
<meta name="description" content="Blog of Jason Meridth - Learn, Converse, Share">
<meta name="keywords" content="git">

<!-- Twitter Cards -->
  
    <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@jmeridth">
  <meta name="twitter:creator" content="@jmeridth">
  <meta name="twitter:image" content="/images/meridth_llc_cog.png">


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Git reset, checkout & "bare double dash", and revert">
<meta property="og:description" content="Blog of Jason Meridth - Learn, Converse, Share">
<meta property="og:url" content="https://blog.jasonmeridth.com/posts/git-reset-checkout-bare-double-dash-revert/">
<meta property="og:site_name" content="Jason Meridth">
<meta property="og:image" content="https://blog.jasonmeridth.com/images/images/logo.jpg">

<meta name="google-site-verification" content="2LRsgnHFM86Lph9HmYJGK6Uoa-Fn75nSU9YdAGbZAo4">



<link rel="canonical" href="https://blog.jasonmeridth.com/posts/git-reset-checkout-bare-double-dash-revert/">
<link href="https://blog.jasonmeridth.com/feed.xml" type="application/atom+xml" rel="alternate" title="Jason Meridth Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/main.css">
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://blog.jasonmeridth.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://blog.jasonmeridth.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://blog.jasonmeridth.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://blog.jasonmeridth.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://blog.jasonmeridth.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.jasonmeridth.com/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="https://blog.jasonmeridth.com/">
          
            <img class="logo" src="https://blog.jasonmeridth.com/images/logo.jpg" alt="Jason Meridth">
          
          <a href="https://blog.jasonmeridth.com/" class="title"> Jason Meridth</a>
        </a>
      </li>
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/feed.xml"><h3>RSS</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/about"><h3>About</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/"><h3>Home</h3></a></li>
            
        
      
      <li class="header-item"><a href="https://blog.jasonmeridth.com/search"><h3><i class="fa fa-search"></i></h3></a></li>
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Git reset, checkout & "bare double dash", and revert</h1>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="https://blog.jasonmeridth.com/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/tags"><h3>Tags</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/about"><h3>About</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/feed.xml"><h3>RSS</h3></a></li>
      
    
  </ul>
</nav>


  <a href="https://twitter.com/jmeridth" class="btn btn-info button-twitter" data-show-count="false" data-size="large"><i class="fa fa-twitter"></i> <span> | Follow @jmeridth</span></a>



<div id="main" role="main">
  <article class="hentry">
    <div class="entry-content">
        

      <div class="entry-meta">
        <span class="entry-date date published updated">
          <time datetime="2010-03-23T21:29:00-05:00"><a href="https://blog.jasonmeridth.com/posts/git-reset-checkout-bare-double-dash-revert/">March 23, 2010</a></time>
        </span>
        
        <span class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~1 minute
        </span><!-- /.entry-reading-time -->
        
      </div><!-- /.entry-meta -->
      <h1 class="post-title entry-title">Git reset, checkout & "bare double dash", and revert</h1>
      <div class="entry-meta">
        <span class="entry-tags"><a href="https://blog.jasonmeridth.com/tags#git" title="Pages tagged git" class="tag"><span class="term">git</span></a></span>
      </div>

      <p><strong>UPDATE</strong>: Please make sure to read Alexander’s comments on <code class="highlighter-rouge">git rebase --interactive</code></p>

<p><strong>UPDATE</strong>: If you need to unstage a file prior to your first commit:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git <span class="nb">rm</span> <span class="nt">--cached</span> filename
</code></pre></div></div>

<p>Thanks to <a href="http://schambers.lostechies.com">Sean Chambers</a> for tweeting about <a href="http://twitter.com/schambers/status/11005630400">this</a></p>

<p>Some of the common questions I get are about how to reset or revert changes in Git. There are two typical scenarios you have to deal with. One is if you haven’t committed the code yet. The other is if you <em>have</em> committed the code.</p>

<h1 id="before-you-have-committed-the-code"><strong>Before</strong> you have committed the code</h1>

<p>Well, if you want to unstage a file you simply do the following:</p>

<h2 id="git-reset">git reset</h2>

<p>Say you staged a change (“git add”) and you realize you either don’t want the file tracked or the change staged. <code class="highlighter-rouge">git reset</code> is the command that will do this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git reset HEAD filename
</code></pre></div></div>

<p>One of the suggestions I’ve <a href="http://jaimeiniesta.github.io/learn.github.com/p/undoing.html">read about</a> and have given is to create an alias called unstage:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git config <span class="nt">--global</span> alias.unstage <span class="s1">'reset HEAD'</span>
</code></pre></div></div>

<p>So now instead of:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git reset HEAD README
</code></pre></div></div>

<p>you can do:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git unstage README
</code></pre></div></div>

<p>I personally just stick to <code class="highlighter-rouge">git reset HEAD filename</code>. “Why?” you ask. It’s so that if I have to use git on another system that doesn’t have my aliases, I know the commands.</p>

<h2 id="git-checkout">git checkout</h2>

<p>Another common question is “How do I undo an unstaged/uncommitted change? I just want to roll my file back…”. <code class="highlighter-rouge">git checkout — filename</code> handles this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git checkout <span class="nt">--</span> README
</code></pre></div></div>

<p>This will roll the README file back to the last committed version in the working directory. Another question after I answer this is, “Why do you have to put the two dashes there?” The two dashes are canonically called the “bare double dashes”. The reason they are there is because it ensures that the checkout command know that we are trying to roll back a file and not change branches. Remember that the typical usage of the checkout command is to change branches. If you had a branch called README, this command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git checkout README
</code></pre></div></div>

<p>would checkout the README branch and not rollback the current README file in the working directory.</p>

<h2 id="after-you-have-committed-the-code"><strong>After</strong> you have committed the code</h2>

<p>If you committed code that you realized you shouldn’t have, you have two options:</p>

<h2 id="git-revert">git revert</h2>

<p><code class="highlighter-rouge">git revert</code> will create a new commit which undoes a specifc commit that you pass to it. The usual use is to undo the last commit:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git revert HEAD
</code></pre></div></div>

<p>If you need to undo a commit that happened before the last commit you can pass it a <a href="http://book.git-scm.com/4_git_treeishes.html">treeish</a> argument or a specific SHA1 of the commit you want to undo:</p>

<p>Revert the next-to-last commit:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git revert HEAD^
</code></pre></div></div>

<p>Revert a specific commit by SHA:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git revert f8c7dd34
</code></pre></div></div>

<p>Just be aware that if you pass a reference to a commit other than the last one, if there are any merge conflicts created by undoing the change, you will have to deal with those at the time of your new commit (the revert one).</p>

<h2 id="git-commit-amend">git commit —amend</h2>

<p><code class="highlighter-rouge">git commit —amend</code> is another command that allows you to change your last commit. Say I forgot to stage a file for the commit and I need to edit the commit message:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s1">'initial commit'</span>
<span class="nv">$ </span>git add awesome_file
<span class="nv">$ </span>git commit <span class="nt">--amend</span>
</code></pre></div></div>

<p>My visual editor of choice will open with the prior commit message allowing me to edit it, I change the message, save it and exit. The previous commit is overridden by adding the content of my awesome_file and now has my new commit message. Personally, I’ve only had to use this a couple times because I’m usually editing tracked files and by doing <code class="highlighter-rouge">git commit -am “message”</code> I rarely forget to stage my files. The times I’ve had to use <code class="highlighter-rouge">git commit —amend</code> is when I forget to add/stage a new/untracked file.</p>

<h2 id="comments">Comments</h2>

<p><strong><a href="#456" title="2010-03-23 21:41:06">derick.bailey</a>:</strong> dude, you’re a life saver. i was just wondering about reverts earlier today while doing a lunch-n-learn session on git. fortunately, the topic never came up. :) next time, i guess… i’ve done the reset thing a bajillion times, but never looked up the right way to revert something that was committed. and the –amend is awesome, too. so much nicer than having a bunch of “oops, i forgot xyz” commits like i do with subversion.</p>

<p><strong><a href="#457" title="2010-03-23 21:58:11">Adam Ford</a>:</strong> git commit –amend is also useful when you made a typo or forgot something in the commit message, as it allows you to edit that as well!</p>

<p><strong><a href="#458" title="2010-03-23 22:02:57">Jason Meridth</a>:</strong> @derick glad it helped. @Adam I mention that at the bottom of the post, but re-iteration never hurts. Thanks.</p>

<p><strong><a href="#459" title="2010-03-24 01:12:13">Alexander Groß</a>:</strong> As long as you didn’t push your changes to a remote you can also undo commits with interactive rebasing. The end result is as if you never did that commit (as opposed o revert, wich adds a “negative” commit). &gt; git log –oneline -3 123456 foo 567890 bar abcdef baz # Say you want to undo the “bar” commit &gt; git rebase –interactive abcdef # Your editor opens, allowing you to specify which commits to delete or even edit! pick 123456 foo pick 567890 bar pick abcdef baz # Delete the line containing “bar” and save your changes. Exit the editor. # Rebasing… &gt; git log ef3478 foo abcdef baz Done!</p>

<p><strong><a href="#460" title="2010-03-24 01:20:27">Alexander Groß</a>:</strong> I might add that interactive rebasing can also be done to history that has been pushed (published) to a remote, though its not good or recommended practice. Be aware that you will have to force the next push. Also, it might break history for people who have already pulled your changes. The git manpages contain documentation on how to recover from an upstream rebase. http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html</p>

<p><strong><a href="#461" title="2010-03-24 02:09:35">Jason Meridth</a>:</strong> @Alexander Yep. That’s another way to do it. You’ve actually saved me the time of writing a post for that. I’m going to update this post and make sure people read your comments. Thank you.</p>

<p><strong><a href="#462" title="2010-03-24 02:38:35">derick.bailey</a>:</strong> so how do i revert a merge? i just merged BranchA into Master and realized that I didn’t want to do that… when i run “git revert HEAD^” on master, I get this message: “fatal: commit (hash#) is a merge but no -m option was given.” then when i try the -m option i get “error: switch ‘m’ expects a numerical value” … for “parent number” … umm…. what?</p>

<p><strong><a href="#463" title="2010-03-24 03:44:42">Jason Meridth</a>:</strong> @derick http://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt summarizes this situation. Wicked stuff. I’ll be researching this problem in more depth</p>

<p><strong><a href="#464" title="2010-03-24 04:11:55">Jason Meridth</a>:</strong> @derick @qrush responded to your tweet and his solution is easier: Just create a new branch from the commit on master, prior to the merge, delete master and rename the new branch to master. this will work if you haven’t deleted the topic you merged into master.</p>

<p><strong><a href="#465" title="2010-03-25 01:53:30">derick.bailey</a>:</strong> @qrush got me squared away: git reset –hard HEAD^ I’ve used reset –hard to clean out my current working set and get back to last commit… just didn’t think about it in this case. i was so fixated on “revert” (from my svn experience) that I couldn’t see past the git revert command.</p>

<p><strong><a href="#466" title="2010-03-25 02:17:04">Jason Meridth</a>:</strong> @derick Excellent. I’m going to update the post to make sure people read your comments so that the knowledge is shared. Thank you for following up on this.</p>


      <footer class="entry-meta">
        
        <span class="author vcard"><span class="fn">Jason Meridth</span></span>
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https://blog.jasonmeridth.com/posts/git-reset-checkout-bare-double-dash-revert/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=https://blog.jasonmeridth.com/posts/git-reset-checkout-bare-double-dash-revert/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=https://blog.jasonmeridth.com/posts/git-reset-checkout-bare-double-dash-revert/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->

      </footer>
    </div><!-- /.entry-content -->
    <div class="read-more">
  <div class="read-more-header">
    <a href="https://blog.jasonmeridth.com" class="read-more-btn">About the Author</a>
  </div><!-- /.read-more-header -->
  <div class="read-more-content author-info">
    <h3>Jason Meridth</h3>
    <div class="author-container">
      <p class="center"><img class="avatar" src="https://avatars3.githubusercontent.com/jmeridth?v=3&s=400" alt="jmeridth" srcset="https://avatars3.githubusercontent.com/jmeridth?v=3&s=400 1x, https://avatars3.githubusercontent.com/jmeridth?v=3&s=800 2x, https://avatars3.githubusercontent.com/jmeridth?v=3&s=1200 3x, https://avatars3.githubusercontent.com/jmeridth?v=3&s=1600 4x" width="400" height="400" data-proofer-ignore="true" /></p>
      <div class="author-bio">My name is Jason Meridth. I am a continuously learning senior software developer/team lead/development manager trying to not let best be the enemy of better. I reserve the right to change my mind upon obtaining more information.  I am also the owner and principal software consultant at Meridth, LLC.  If you have any software, hardward, networking, process, etc needs please don't hesitate to reach out to me.</div>
    </div>
    <div class="author-share">
      <ul class="list-inline social-buttons">
        
          <li><a href="https://github.com/jmeridth" target="_blank"><i class="fa fa-github fa-fw"></i></a></li>
        
          <li><a href="https://br.linkedin.com/in/jmeridth" target="_blank"><i class="fa fa-linkedin fa-fw"></i></a></li>
        
          <li><a href="https://twitter.com/jmeridth" target="_blank"><i class="fa fa-twitter fa-fw"></i></a></li>
        
      </ul>
      
        <a aria-label="Follow @jmeridth on GitHub" data-size="large" href="https://github.com/jmeridth" class="github-button">Follow @jmeridth</a>
      
      <br>
      
        <a href="https://twitter.com/jmeridth" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @jmeridth</a>
      
    </div>
  </div>
</div>

    
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="https://blog.jasonmeridth.com/posts/refspec-matches-more-than-one/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="https://blog.jasonmeridth.com/posts/raspberry-pi-kubernetes-cluster-part-1/" title="Raspberry Pi Kubernetes Cluster - Part 1">Raspberry Pi Kubernetes Cluster - Part 1</a></h3>
      <p>HowdyThis is going to be the first post about my setup of a Raspberry Pi Kubernetes Cluster.  I saw a post by [Hart Hoover](https://harth...&hellip; <a href="https://blog.jasonmeridth.com/posts/raspberry-pi-kubernetes-cluster-part-1/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="https://blog.jasonmeridth.com/posts/ssh-too-many-authentication-failures/" title="SSH - Too Many Authentication Failures">SSH - Too Many Authentication Failures</a></h4>
        <span>Published on March 28, 2018</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="https://blog.jasonmeridth.com/posts/clear-dns-cache-in-chrome/" title="Clear DNS Cache In Chrome">Clear DNS Cache In Chrome</a></h4>
        <span>Published on March 27, 2018</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38456568-3', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>






<script type="text/javascript">
    sharing();
</script>



<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2018 Jason Meridth. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://github.com/aron-bordin/neo-hpstr-jekyll-theme" rel="nofollow">Neo-HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
