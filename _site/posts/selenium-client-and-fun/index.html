<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Selenium-client and fun &#8211; Jason Meridth</title>
<meta name="description" content="Blog of Jason Meridth - Learn, Converse, Share">
<meta name="keywords" content="">

<!-- Twitter Cards -->
  
    <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@jmeridth">
  <meta name="twitter:creator" content="@jmeridth">
  <meta name="twitter:image" content="/images/meridth_llc_cog.png">


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Selenium-client and fun">
<meta property="og:description" content="Blog of Jason Meridth - Learn, Converse, Share">
<meta property="og:url" content="https://blog.jasonmeridth.com/posts/selenium-client-and-fun/">
<meta property="og:site_name" content="Jason Meridth">
<meta property="og:image" content="https://blog.jasonmeridth.com/images/images/logo.jpg">

<meta name="google-site-verification" content="2LRsgnHFM86Lph9HmYJGK6Uoa-Fn75nSU9YdAGbZAo4">



<link rel="canonical" href="https://blog.jasonmeridth.com/posts/selenium-client-and-fun/">
<link href="https://blog.jasonmeridth.com/feed.xml" type="application/atom+xml" rel="alternate" title="Jason Meridth Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/main.css">
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://blog.jasonmeridth.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://blog.jasonmeridth.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://blog.jasonmeridth.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://blog.jasonmeridth.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://blog.jasonmeridth.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.jasonmeridth.com/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="https://blog.jasonmeridth.com/">
          
            <img class="logo" src="https://blog.jasonmeridth.com/images/logo.jpg" alt="Jason Meridth">
          
          <a href="https://blog.jasonmeridth.com/" class="title"> Jason Meridth</a>
        </a>
      </li>
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/feed.xml"><h3>RSS</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/about"><h3>About</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/"><h3>Home</h3></a></li>
            
        
      
      <li class="header-item"><a href="https://blog.jasonmeridth.com/search"><h3><i class="fa fa-search"></i></h3></a></li>
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Selenium-client and fun</h1>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="https://blog.jasonmeridth.com/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/tags"><h3>Tags</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/about"><h3>About</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/feed.xml"><h3>RSS</h3></a></li>
      
    
  </ul>
</nav>


  <a href="https://twitter.com/jmeridth" class="btn btn-info button-twitter" data-show-count="false" data-size="large"><i class="fa fa-twitter"></i> <span> | Follow @jmeridth</span></a>



<div id="main" role="main">
  <article class="hentry">
    <div class="entry-content">
        

      <div class="entry-meta">
        <span class="entry-date date published updated">
          <time datetime="2009-02-12T04:35:00-06:00"><a href="https://blog.jasonmeridth.com/posts/selenium-client-and-fun/">February 12, 2009</a></time>
        </span>
        
        <span class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~1 minute
        </span><!-- /.entry-reading-time -->
        
      </div><!-- /.entry-meta -->
      <h1 class="post-title entry-title">Selenium-client and fun</h1>
      <div class="entry-meta">
        <span class="entry-tags"></span>
      </div>

      <p>So I’ve had the pleasure of working with <a href="http://github.com/ph7/selenium-client/tree/master">selenium-client</a>, the official Ruby client API for Selenium Remote Control (bare bone client driver). Assumptions: 1. You have Ruby 1.8+ installed 2. You have rubygems installed I’m going to use the Slicehost Manage website to drive with my selenium tests. No babble, just instructions.</p>

<p>1.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo gem install selenium-client
</code></pre></div></div>

<p>2. download the <a href="http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/selenium-remote-control-1.0-beta-2-dist.zip">selenium remote control</a> (version 1.0 beta at the time of this entry). Remember where you install this because you will be reference the selenium-server.jar inside it.</p>

<p>3. update your .bashrc (usually on Ubuntu) or .bash_profile (what I have on my Mac) with a alias to start the selenium server (for me I have unzipped the download into a ~/code/seleniumrc folder:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># commands
alias selsrvr="java -jar ~/code/seleniumrc/selenium-server-1.0-beta-2/selenium-server.jar"
</code></pre></div></div>

<p>after you add that, re-source your bash file. For me on my Mac</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. ~/.bash_profile
</code></pre></div></div>

<p>For me on my Ubuntu box:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. ~/.bashrc
</code></pre></div></div>

<p>4. Create a test file, test.rb somewhere (for me ~/code/seleniumrc/test.rb):</p>

<p>5. Write a test that:</p>

<ol>
  <li>
    <p>Logs in</p>
  </li>
  <li>
    <p>Creates a slice</p>
  </li>
  <li>
    <p>Captures the new root password</p>
  </li>
  <li>
    <p>Captures the new IP Address</p>
  </li>
  <li>
    <p>SSHs onto the new slice</p>
  </li>
  <li>
    <p>Adds a file, and lists out the content of ~ (aka /home/root)</p>
  </li>
  <li>
    <p>Deletes the slice</p>
  </li>
  <li>
    <p>Logs out</p>
  </li>
</ol>

<p>6.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require "test/unit"
require "rubygems"
gem "selenium-client", "&gt;=1.2.9"
require "selenium/client"
require "net/ssh"

class NewTest &lt; Test::Unit::TestCase
  attr_reader :browser

  def setup
    @slice_name = "slice3"
    @browser = Selenium::Client::Driver.new "localhost", 4444, "*firefox", "https://manage.slicehost.com/", 10000
    browser.start_new_browser_session
  end

  def teardown
    browser.close_current_browser_session
  end

  def test_should_be_able_to_ssh_onto_new_slice_and_add_new_file
    login
    begin
        create_slice(@slice_name)
        root_password = @browser.get_text("id=flash").sub(/You will receive an email upon completion. The new root password will be: /, '')
        ip_address = @browser 
          .get_text("xpath=/html/body/div[@id='container']/div[@id='main']/div[1]/div[@id='slice_action']/div[@id='show_slice']/table/tbody/tr[4]/td[2]") 
          .scan(/d{0,3}.d{0,3}.d{0,3}.d{0,3}/)
        assert !180.times{ break if (@browser.is_text_present("active") rescue false); sleep 1 }
        Net::SSH.start(ip_address[0].to_s, 'root', :password =&gt; root_password) do |ssh|
            ssh.exec("rm selenium_test_file.txt")
            ssh.exec("touch selenium_test_file.txt")

            stdout = ""
            ssh.exec!("ls -lah ~") do |channel, stream, data|
              stdout &lt;&lt; data if stream == :stdout
            end
            puts stdout
        end
        go_to_slice(@slice_name)
    ensure
        assert !180.times{ break if (@browser.is_text_present("active") rescue false); sleep 1 }
        delete_slice(@slice_name) 
    end
    logout
  end

  def test_should_be_able_to_delete_an_existing_slice
    login
    go_to_slice(@slice_name)
    delete_slice(@slice_name)
    logout
  end


  def login
    @browser.open "/login"
    assert_equal "Slicehost Login", browser.title
    @browser.type "email", "youemail@domain.com"
    @browser.type "password", "yourpassword"
    @browser.click "commit"
    browser_wait
  end

  def create_slice(slice_name)
    @browser.click "link=Add a Slice"
    browser_wait
    @browser.type "name", slice_name
    @browser.click "commit"
    browser_wait
  end

  def go_to_slice(slice_name)
    @browser.click "link=My Slices"
    browser_wait
    @browser.click "link=#{slice_name}"
    browser_wait
  end

  def delete_slice(slice_name)
    @browser.click "link=Delete"
    @browser.click "link=Delete #{slice_name}"
    assert /^Permanently delete this Slice and all of its data[sS] There is no turning back!$/ =~ @browser.get_confirmation
  end

  def logout
    @browser.click "link=Logout"
    browser_wait
  end

  def browser_wait
    @browser.wait_for_page_to_load "30000"
  end
end
</code></pre></div></div>

<p>7. Start the selenium server:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>selsrvr
</code></pre></div></div>

<p>8. run the test:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ruby ~/code/seleniumrc/test.rb
</code></pre></div></div>

<p>You should see the firefox browser open up in two windows and see the automation in process. Once the slice is created, I’ve setup a timer at 180 seconds (3 min) to wait for the slice to be created and set to a status of active. Like #5 above states, once complete the test captures the root password and ip address off the web UI and uses them to SSH into the new slice. This is my 3rd time using selenium and I like what I see. More to come.</p>

      <footer class="entry-meta">
        
        <span class="author vcard"><span class="fn">Jason Meridth</span></span>
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https://blog.jasonmeridth.com/posts/selenium-client-and-fun/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=https://blog.jasonmeridth.com/posts/selenium-client-and-fun/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=https://blog.jasonmeridth.com/posts/selenium-client-and-fun/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->

      </footer>
    </div><!-- /.entry-content -->
    <div class="read-more">
  <div class="read-more-header">
    <a href="https://blog.jasonmeridth.com" class="read-more-btn">About the Author</a>
  </div><!-- /.read-more-header -->
  <div class="read-more-content author-info">
    <h3>Jason Meridth</h3>
    <div class="author-container">
      <p class="center"><img class="avatar" src="https://avatars3.githubusercontent.com/jmeridth?v=3&s=400" alt="jmeridth" srcset="https://avatars3.githubusercontent.com/jmeridth?v=3&s=400 1x, https://avatars3.githubusercontent.com/jmeridth?v=3&s=800 2x, https://avatars3.githubusercontent.com/jmeridth?v=3&s=1200 3x, https://avatars3.githubusercontent.com/jmeridth?v=3&s=1600 4x" width="400" height="400" data-proofer-ignore="true" /></p>
      <div class="author-bio">My name is Jason Meridth. I am a continuously learning senior software developer/team lead/development manager trying to not let best be the enemy of better. I reserve the right to change my mind upon obtaining more information.  I am also the owner and principal software consultant at Meridth, LLC.  If you have any software, hardward, networking, process, etc needs please don't hesitate to reach out to me.</div>
    </div>
    <div class="author-share">
      <ul class="list-inline social-buttons">
        
          <li><a href="https://github.com/jmeridth" target="_blank"><i class="fa fa-github fa-fw"></i></a></li>
        
          <li><a href="https://br.linkedin.com/in/jmeridth" target="_blank"><i class="fa fa-linkedin fa-fw"></i></a></li>
        
          <li><a href="https://twitter.com/jmeridth" target="_blank"><i class="fa fa-twitter fa-fw"></i></a></li>
        
      </ul>
      
        <a aria-label="Follow @jmeridth on GitHub" data-size="large" href="https://github.com/jmeridth" class="github-button">Follow @jmeridth</a>
      
      <br>
      
        <a href="https://twitter.com/jmeridth" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @jmeridth</a>
      
    </div>
  </div>
</div>

    
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="https://blog.jasonmeridth.com/posts/houston-alt-net-open-space-april-3rd-april-5th-2009/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="https://blog.jasonmeridth.com/posts/raspberry-pi-kubernetes-cluster-part-1/" title="Raspberry Pi Kubernetes Cluster - Part 1">Raspberry Pi Kubernetes Cluster - Part 1</a></h3>
      <p>HowdyThis is going to be the first post about my setup of a Raspberry Pi Kubernetes Cluster.  I saw a post by [Hart Hoover](https://harth...&hellip; <a href="https://blog.jasonmeridth.com/posts/raspberry-pi-kubernetes-cluster-part-1/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="https://blog.jasonmeridth.com/posts/ssh-too-many-authentication-failures/" title="SSH - Too Many Authentication Failures">SSH - Too Many Authentication Failures</a></h4>
        <span>Published on March 28, 2018</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="https://blog.jasonmeridth.com/posts/clear-dns-cache-in-chrome/" title="Clear DNS Cache In Chrome">Clear DNS Cache In Chrome</a></h4>
        <span>Published on March 27, 2018</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38456568-3', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>






<script type="text/javascript">
    sharing();
</script>



<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2018 Jason Meridth. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://github.com/aron-bordin/neo-hpstr-jekyll-theme" rel="nofollow">Neo-HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
