<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Jason Meridth Blog &#8211; Jason Meridth</title>
<meta name="description" content="Blog of Jason Meridth - Learn, Converse, Share">
<meta name="keywords" content="Jason Meridth, blog">

<!-- Twitter Cards -->
  
    <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@jmeridth">
  <meta name="twitter:creator" content="@jmeridth">
  <meta name="twitter:image" content="/images/meridth_llc_cog.png">


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Jason Meridth Blog">
<meta property="og:description" content="Blog of Jason Meridth - Learn, Converse, Share">
<meta property="og:url" content="https://blog.jasonmeridth.com/page15/">
<meta property="og:site_name" content="Jason Meridth">
<meta property="og:image" content="https://blog.jasonmeridth.com/images/images/logo.jpg">

<meta name="google-site-verification" content="2LRsgnHFM86Lph9HmYJGK6Uoa-Fn75nSU9YdAGbZAo4">



<link rel="canonical" href="https://blog.jasonmeridth.com/page15/">
<link href="https://blog.jasonmeridth.com/feed.xml" type="application/atom+xml" rel="alternate" title="Jason Meridth Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/main.css">
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="https://blog.jasonmeridth.com/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://blog.jasonmeridth.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://blog.jasonmeridth.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://blog.jasonmeridth.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://blog.jasonmeridth.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://blog.jasonmeridth.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.jasonmeridth.com/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body id="post-index">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="https://blog.jasonmeridth.com/">
          
            <img class="logo" src="https://blog.jasonmeridth.com/images/logo.jpg" alt="Jason Meridth">
          
          <a href="https://blog.jasonmeridth.com/" class="title"> Jason Meridth</a>
        </a>
      </li>
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/feed.xml"><h3>RSS</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/about"><h3>About</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://blog.jasonmeridth.com/"><h3>Home</h3></a></li>
            
        
      
      <li class="header-item"><a href="https://blog.jasonmeridth.com/search"><h3><i class="fa fa-search"></i></h3></a></li>
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Jason Meridth Blog</h1>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="https://blog.jasonmeridth.com/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/tags"><h3>Tags</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/about"><h3>About</h3></a></li>
      
    
      
        <li><a href="https://blog.jasonmeridth.com/feed.xml"><h3>RSS</h3></a></li>
      
    
  </ul>
</nav>


  <a href="https://twitter.com/jmeridth" class="btn btn-info button-twitter" data-show-count="false" data-size="large"><i class="fa fa-twitter"></i> <span> | Follow @jmeridth</span></a>



<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-05-26T04:45:00-05:00"><a href="https://blog.jasonmeridth.com/posts/gitosis-and-gitweb-part-3/">May 26, 2010</a></time>
      </span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://blog.jasonmeridth.com/posts/gitosis-and-gitweb-part-3/" rel="bookmark" title="Gitosis and Gitweb - Part 3" itemprop="url">Gitosis and Gitweb - Part 3</a></h1>
    
    <div class="entry-meta">
      <span class="entry-tags"><a href="https://blog.jasonmeridth.com/tags#git" title="Post tagged git" class="tag"><span class="term">git</span></a><a href="https://blog.jasonmeridth.com/tags#gitosis" title="Post tagged gitosis" class="tag"><span class="term">gitosis</span></a></span>
    </div>
  </header>
  <div class="entry-content">
      <p><a href="/posts/gitosis-and-gitweb-part-1">Gitosis and Gitweb – Part 1</a></p>

<p><a href="/posts/gitosis-and-gitweb-part-2">Gitosis and Gitweb – Part 2</a></p>

<p>So we are setup, have a project, and have contributors via the first 2 parts.</p>

<p>I know that we are all enamored by the UI of <a href="http://github.com">GitHub.com</a>. I am. Unfortunately you can’t get private repositories for free (In all fairness it’s only $7/mo. – a <em>very</em> wise investment). I am aware of <a href="http://gitorious.com">Gitorious</a> like I mentioned in the first part, but I have no experience with that. I will after this series and update this series if I find it better. Again, I like to use the simplest thing that works. (Of course, “simplest” is in the eye of the beholder)</p>

<p>In this section I’m going to show you how to install Gitweb, a UI tool that let’s you view your repositories. I’m also going to mention how to get it to auto-detect any new repositories and ensure they show up on the web UI. I learned how to do most of this from my co-worker <a href="http://twitter.com/ajmesserli">Antony Messerli</a>. He is a true Linux and problem-solving Jedi.</p>

<h2 id="install-apache">Install Apache</h2>

<p>First, you need to ensure apache2 is installed. Check to see if you have an /etc/apache2 folder. If you do, you should be okay. If you don’t, you need to install it.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>apache2
</code></pre></div></div>

<p>For more in-depth advice, I always reference the <a href="http://articles.slicehost.com/2010/5/19/installing-apache-on-ubuntu">Slicehost Articles</a></p>

<p>Once you have that installed the daemon restarted, go to your slices ip address in the browser of your choice (i.e,. http://123.123.123.123) and you should something like “It Works”</p>

<p>Voila! You have apache running.</p>

<h2 id="install-the-package">Install the Package</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>gitweb
</code></pre></div></div>

<p>This will install gitweb into /var/www/gitweb, create a conf file at /etc/gitweb.conf, and add three files to /usr/share/gitweb (git-favicon.png, git-logo.png, gitweb.css).</p>

<p>Note: If for some reason, the /var/www/gitweb folder <em>is not</em> created, you can clone the git source (git clone git://git.kernel.org/pub/scm/git/git.git) and then just copy the git/gitweb folder to /var/www/gitweb</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> <span class="nt">-R</span> git/gitweb /var/www/
</code></pre></div></div>

<p>You only need to edit the $projectroot variable in the /etc/gitweb.conf to point to your gitosis repositories folder:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># path to git projects (&lt;project&gt;.git)</span>
<span class="nv">$projectroot</span> <span class="o">=</span> <span class="s2">"/home/git/repositories"</span><span class="p">;</span>
...
</code></pre></div></div>

<p>Since this isn’t a post about Apache, I just add the gitweb directory setup to the base Apache config. Since Ubuntu includes the entire /etc/apache2/conf.d directory, I just added the following information into /etc/apach2/conf.d/gitweb:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RewriteEngine on
RewriteRule ^/gitweb/<span class="o">([</span>a-zA-Z0-9_<span class="se">\-</span><span class="o">]</span>+<span class="se">\.</span>git<span class="o">)</span>/?<span class="o">(</span><span class="se">\?</span>.<span class="k">*</span><span class="o">)</span>?<span class="nv">$ </span>/cgi-bin/gitweb.cgi/<span class="nv">$1</span> <span class="o">[</span>L,PT]

Alias /gitweb /home/git/repositories
&lt;Directory /home/git/repositories&gt;
Options Indexes FollowSymlinks ExecCGI
DirectoryIndex /cgi-bin/gitweb.cgi
AllowOverride None
&lt;/Directory&gt;
</code></pre></div></div>

<p>Restart Apache to make sure everything works</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> /etc/init.d/apache2 restart
</code></pre></div></div>

<p>The first time you go to your website again, you’ll see Gitweb, but it’ll say no projects are available. Fix mentioned below.</p>

<h3 id="two-hacks-open-to-suggestions">Two Hacks (open to suggestions)</h3>

<p>1. I had to copy the git-favicon.png, git-logo.png, gitweb.css files from /usr/share/gitweb to /var/www/gitweb/. (if you had to do what is mentioned in the Note above, you don’t have to do this, since the gitweb folder from the git source clone includes these files already)</p>

<p>2. I had to make the repositories that I wanted visible in gitweb have permissions of 755 (aka owner has read, write, execute. group and others have read, execute.)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod</span> <span class="nt">-R</span> 755 /git/repositories/lostechies.git
</code></pre></div></div>

<p>Once that was done I can see the repository and it’s information on Gitweb.</p>

<p><img src="https://blog.jasonmeridth.com/images/gitweb-part3.png" alt="" /></p>

<p>If you want to edit the project description from “Unnamed repository; edit this file ‘description’ to name the repository.” go to the repositories description file (/home/git/repositories/          lostechies.git/description for this repo) and edit the file and save.</p>

<h3 id="cron-job">Cron job</h3>

<p>I, again with the leadership of Ant, utilized a cron job he wrote to automatically make the repositories have permissions of 755. I do have some repositories, like gitosis-admin, that I do not ever want visible on Gitweb. The cron job excludes them. Here is the cron job code, showing that I don’t want to show my personal.git and gitosis-admin.git repositories. This could be easily written in Ruby or any other “scripting language” of your choice:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

<span class="nv">GITOSIS_REPO_PATH</span><span class="o">=</span><span class="s2">"/home/git/repositories"</span>
<span class="nv">GITOSIS_ADMIN_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GITOSIS_REPO_PATH</span><span class="s2">/gitosis-admin.git"</span>
<span class="nv">PERSON_REPO_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GITOSIS_REPO_PATH</span><span class="s2">/personal.git"</span>

debug <span class="o">()</span>
<span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"[D]: </span><span class="nv">$1</span><span class="s2">"</span> <span class="o">&gt;</span> /dev/null
<span class="o">}</span>

<span class="k">for </span><span class="nb">dir </span><span class="k">in</span> <span class="sb">`</span>find <span class="nv">$GITOSIS_REPO_PATH</span> <span class="nt">-maxdepth</span> 1 <span class="nt">-mindepth</span> 1 <span class="nt">-type</span> d<span class="sb">`</span><span class="p">;</span> <span class="k">do
    if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$dir</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"</span><span class="nv">$GITOSIS_ADMIN_PATH</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
        if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$dir</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"</span><span class="nv">$PERSON_REPO_PATH</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
             <span class="sb">`</span><span class="nb">chmod</span> <span class="nt">-R</span> 0755 <span class="nv">$dir</span><span class="sb">`</span>
        <span class="k">fi
    fi
    </span>debug <span class="s2">"All repositories have permissions set to 0755"</span>
<span class="k">done</span>
</code></pre></div></div>

<p>I chose bash, so that I could take that time to learn it.<br />
Translation: Find all the directories in my gitosis repository path (/home/git/repositories) and if they are not gitosis-admin or personal, change their permissions, recursively, to 0755.</p>

<p>I put this in a file called set_gitosis_permissions_to_view_on_gitweb.sh and put it in root’s home folder, /root. I then called the file from root’s crontab:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ /&gt; <span class="nb">sudo </span>su -
<span class="c"># /root &gt; crontab -e</span>
<span class="c"># m h dom mon dow  command</span>
<span class="k">*</span>/5 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> /root/set_gitosis_permissions_to_view_on_gitweb.sh
</code></pre></div></div>

<p>This means that every 5 minutes, my bash file will set any new repositories to 0755. This is how to get Gitweb stood up. The next post will show how to hide it behind HTTP basic auth and a self-signed certificate.</p>

<p>Next Part: Hiding the Gitweb site</p>

<h2 id="comments">Comments</h2>

<p><strong><a href="#483" title="2010-07-09 22:07:08">katy lavallee</a>:</strong> Anxiously awaiting the next part :)</p>

<p><strong><a href="#513" title="2011-11-05 01:16:00">Thorpe</a>:</strong> You said you chose Bash so that you could take some time to learn it. Unfortunately however, your shebang points to sh not bash. There is some differences.</p>


      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-05-25T03:02:00-05:00"><a href="https://blog.jasonmeridth.com/posts/gitosis-and-gitweb-part-2/">May 25, 2010</a></time>
      </span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://blog.jasonmeridth.com/posts/gitosis-and-gitweb-part-2/" rel="bookmark" title="Gitosis and Gitweb - Part 2 - Add Projects and Contributors" itemprop="url">Gitosis and Gitweb - Part 2 - Add Projects and Contributors</a></h1>
    
    <div class="entry-meta">
      <span class="entry-tags"><a href="https://blog.jasonmeridth.com/tags#git" title="Post tagged git" class="tag"><span class="term">git</span></a><a href="https://blog.jasonmeridth.com/tags#gitosis" title="Post tagged gitosis" class="tag"><span class="term">gitosis</span></a></span>
    </div>
  </header>
  <div class="entry-content">
      <p><a href="/posts/gitosis-and-gitweb-part-1">Gitosis and Gitweb – Part 1</a></p>

<p>So we are setup now thanks to Part 1.</p>

<h2 id="gitosis-repository-contents">Gitosis repository contents</h2>

<p>If we issue the “find .” command locally inside the gitosis-admin directory we will see the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> find <span class="nb">.</span>
&lt;a bunch of files from .git folder<span class="o">)</span>
./gitosis.conf
./keydir
./keydir/user@local.pub
</code></pre></div></div>

<p>We have the .git folder, a gitosis.conf file, and a keydir with a pub key file.</p>

<h2 id="add-our-first-project">Add our first project</h2>

<p>Our project name for this example is lostechies. If you view the gitosis-admin.conf file you will see the initial content like so:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> <span class="nb">cat </span>gitosis.conf
<span class="o">[</span>gitosis]

<span class="o">[</span>group gitosis-admin]
writable <span class="o">=</span> gitosis-admin
members <span class="o">=</span> user@local
</code></pre></div></div>

<p>This is the result of the following command from the last part:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-H</span> <span class="nt">-u</span> git gitosis-init &lt; /tmp/id_rsa.pub
</code></pre></div></div>

<p>That command puts the public ssh key into the keydirs directory and adds the associated username from the file to be the first member of the gisotis-admin project. Hence seeing user@local as the member. It matches the filename of the pub file in the keydir directory (user@local.pub). That’s how gitosis relates members listed in the conf file to the keys in the keydir directory, filename minus the pub extension.</p>

<p>Let’s edit this conf file to include our lostechies project:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> <span class="nb">cat </span>gitosis.conf
<span class="o">[</span>gitosis]

<span class="o">[</span>group gitosis-admin]
writable <span class="o">=</span> gitosis-admin
memebers <span class="o">=</span> user@local

<span class="o">[</span>group meridth]
writable <span class="o">=</span> meridth
members <span class="o">=</span> user@local
</code></pre></div></div>

<p>It looks exactly like the gitosis-admin one. Now we commit it just like we would normally when using Git. We can add, then commit or commit with the -am argument. This is possible since the gitosis-admin.conf file is already tracked by the repository.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> git commit <span class="nt">-am</span> <span class="s2">"add meridth project"</span>
<span class="o">[</span>master 6b7a5da] add meridth project
1 file changed, 3 insertions<span class="o">(</span>+<span class="o">)</span>, 0 deletions<span class="o">(</span>-<span class="o">)</span>
</code></pre></div></div>

<p>and push it to the remote gitosis-admin repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> git push
Counting objects: 5, <span class="k">done</span><span class="nb">.</span>
Delta compression using up to 2 threads
Compressing objects: 100% <span class="o">(</span>3/3<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
Writing objects: 100% <span class="o">(</span>3/3<span class="o">)</span>, 385 bytes, <span class="k">done</span><span class="nb">.</span>
Total 3 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
To git@YOUR_SERVER_HOSTNAME:gitosis-admin.git
   23842e9..6b7a5da master -&gt; master
</code></pre></div></div>

<p>We need to create the lostechies repository locally, add an initial item (README in this case), and push it remotely. Gitosis won’t create the repository until something it pushed to it.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>START HERE
</code></pre></div></div>

<p>The lostechies repository now exists remotely. Currently my account is the only that has access. Let’s add another contributor.</p>

<h2 id="add-our-first-contributors">Add our first contributors</h2>

<p>Say I want to allow my friend Joe to have commit (writable) access to my lostechies repository and I want my friend Ryan to only have readonly access. I tell them to send me their public ssh keys. I make sure the files are named joe.pub and ryan.pub. I then put them into my local gitosis-admin repository’s keydir directory and then I edit the gitosis.conf file to be:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> <span class="nb">cp</span> ~/joe.pub keydir/ <span class="o">&amp;&amp;</span> <span class="nb">cp</span> ~/ryan.pub keydir/
~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> vim gitosis.conf
<span class="o">[</span>gitosis]

<span class="o">[</span>group gitosis-admin]
writable <span class="o">=</span> gitosis-admin
members <span class="o">=</span> user@local

<span class="o">[</span>group lostechies]
writable <span class="o">=</span> lostechies
members <span class="o">=</span> user@local joe

<span class="o">[</span>group lostechies_ro]
<span class="nb">readonly</span> <span class="o">=</span> lostechies
members <span class="o">=</span> ryan
</code></pre></div></div>

<p>Notice that I had to create a whole new group (lostechies_ro) to setup Ryan’s readonly access. You can’t combine readonly and writable permissions in gitosis (wish we could – open source contribution there?).</p>

<p>Now I need to “git add” the new keys, and commit the changes to the conf file. Finally I push the changes.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> git add keydir/joe.pub keydir/ryan.pub
~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> git commit <span class="nt">-am</span> <span class="s2">"add joe and ryan and give them access to lostechies repository"</span>
<span class="o">[</span>master 3fb193c] add joe and ryan and give them access to lostechies repository
 3 files changed, 6 insertions<span class="o">(</span>+<span class="o">)</span>, 1 deletions<span class="o">(</span>-<span class="o">)</span>
 create mode 100644 keydir/joe.pub
 create mode 100644 keydir/ryan.pub
~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> git push
Counting objects: 7, <span class="k">done</span><span class="nb">.</span>
Delta compression using up to 2 threads.
Compressing objects: 100% <span class="o">(</span>4/4<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
Writing objects: 100% <span class="o">(</span>4/4<span class="o">)</span>, 470 bytes, <span class="k">done</span><span class="nb">.</span>
Total 4 <span class="o">(</span>delta 1<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
To git@YOUR_SERVER_HOSTNAME: gitosis-admin.git
   20148cf..efb193c master -&gt; master
</code></pre></div></div>

<p>Now Joe or Ryan can clone this repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone git@YOUR_SERVER_HOSTNAME:lostechies.git
</code></pre></div></div>

<p><em><strong>NOTE:</strong></em> Again, if they receive the following error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ <span class="o">&gt;</span> git clone git@YOUR_SERVER_HOSTNAME:gitosis-admin.git
Initialized empty Git repository <span class="k">in</span> /Users/user/gitosis-admin/.git/
ssh: connect to host YOUR_SERVER_HOSTNAME port 22: Connection refused
fatal: The remote end hung up unexpectedly
</code></pre></div></div>

<p>The solution, involving the .ssh/config file is in the first post in this series.</p>

<p>That is how you create a repository and add users.</p>

<h2 id="debug">DEBUG</h2>

<p>If you are unable to connect you have the option of editing the gitosis.conf file with more message verbosity by adding “loglevel=DEBUG” at the top of the conf file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> vim gitosis.conf
<span class="o">[</span>gitosis]
<span class="nv">loglevel</span><span class="o">=</span>DEBUG
...
</code></pre></div></div>

<p>This will give you more information on the ouput when trying to push to the remote repository.</p>

<h2 id="cant-push-changes">Can’t push changes</h2>

<p>As Scott Chacon states in his gitosis section of <a href="http://progit.org/book/ch4-7.html">Pro Git</a>:</p>

<blockquote>
  <p>“If you’ve lost push access by pushing a messed-up configuration, you can manually fix the file on the server under /home/git/.gitosis.conf — the file from which Gitosis reads its info. A push to the project takes the gitosis.conf file you just pushed up and sticks it there. If you edit that file manually, it remains like that until the next successful push to the gitosis-admin project.”</p>
</blockquote>

<p>The .gitosis.conf file in the git user’s home directory is a symlink to the actual conf file in the gitosis-admin repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lrwxrwxrwx 1 git  git  53 May 22 20:32 .gitosis.conf -&gt; /home/git/repositories/gitosis-admin.git/gitosis.conf
</code></pre></div></div>

<p>Next Part: <a href="/posts/gitosis-and-gitweb-part-3">Gitosis and Gitweb Part 3</a></p>

<h2 id="comments">Comments</h2>

<p><strong><a href="#478" title="2010-05-25 12:51:54">Gabriel N. Schenker</a>:</strong> your post come in handy; just at the right time! Very nicely done, thanks</p>

<p><strong><a href="#479" title="2010-07-24 22:06:27">colvertlyn</a>:</strong> permafrost expected action cover <a href="http://gravity.wikia.com">million per absolute broadly</a> [url=http://www.skyandtelescope.com]emission small glacial observational[/url] http://www.nal.usda.gov</p>

<p><strong><a href="#480" title="2010-07-24 22:06:47">salfordwil</a>:</strong> volunteer physical llc</p>

<p><strong><a href="#481" title="2010-08-21 08:53:11">ashlynnega</a>:</strong> increased link <a href="http://www.unesco.org">rise sectors windows past</a> [url=http://water.usgs.gov]videos comment president android[/url] http://www.newswire.ca</p>

<p><strong><a href="#482" title="2010-08-21 08:53:28">garrmankor</a>:</strong> economy regions hypothesis special</p>

<p><strong><a href="#496" title="2011-05-12 10:24:00">Mullins</a>:</strong> After creating the losttechies repository locally I needed to create the remote ‘origin’ by executing: $ git remote add origin git@MYSERVER.com:losttechies.git</p>


      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-05-25T02:42:00-05:00"><a href="https://blog.jasonmeridth.com/posts/gitosis-and-gitweb-part-1/">May 25, 2010</a></time>
      </span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://blog.jasonmeridth.com/posts/gitosis-and-gitweb-part-1/" rel="bookmark" title="Gitosis and Gitweb - Part 1 - Setup" itemprop="url">Gitosis and Gitweb - Part 1 - Setup</a></h1>
    
    <div class="entry-meta">
      <span class="entry-tags"><a href="https://blog.jasonmeridth.com/tags#git" title="Post tagged git" class="tag"><span class="term">git</span></a><a href="https://blog.jasonmeridth.com/tags#gitosis" title="Post tagged gitosis" class="tag"><span class="term">gitosis</span></a></span>
    </div>
  </header>
  <div class="entry-content">
      <p>I’ve had a number of people ask me where they should host their Git repositories. Of course, my default question back is, “Can the code be public or does it need to be private?”. Usually they say, “public”. Therefore, my repsonse is <a href="http://github.com">Github.com</a>. If they say, “private” I still say Github.  If they don’t <a href="http://github.com/security">“trust” Github</a>, which they should - click the link, then my response is <a href="http://eagain.net/gitweb/?p=gitosis.git;a=summary">Gitosis</a> and <a href="http://git.wiki.kernel.org/index.php/Gitweb">Gitweb</a>. This is by no means the only solution. I’m aware of other ones like Gitorious. I’ve never used Gitorious.</p>

<p>Back to Gitosis. My personal Gitosis server is a slice at <a href="http://slicehost.com">Slicehost.com</a>. You can use an Ubuntu server at home as long as you have remote access. I’ve personally only used Gitosis with an Ubuntu slice, so I don’t know if there are any quirks with other Linux distributions. After setting up a slice (after following the instructions <a href="http://articles.slicehost.com/2008/11/28/ubuntu-intrepid-setup-page-1">here</a> and <a href="http://articles.slicehost.com/2008/11/28/ubuntu-intrepid-setup-page-2">here</a>) I am ready to go.</p>

<p>Notice: This post is a combination of <a href="http://scie.nti.st/2007/11/14/hosting-git-repositories-the-easy-and-secure-way">scie.nti.st’s gitosis post</a> and <a href="http://progit.org/book/ch4-7.html">Scott Chacon’s Pro Git gitosis section</a>. They are my de facto references. Maybe my own will be now. :)</p>

<p>“Enough talk. Let’s fight” ~Po, Kung Fu Panda</p>

<h2 id="intall-git">Intall Git</h2>

<p>After logging into your box, let’s install Git (if not already installed):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>git-core
...
After this operation, 16.3MB of additional disk space will be used.
Do you want to <span class="k">continue</span> <span class="o">[</span>Y/n]?
</code></pre></div></div>

<p>Press enter or type ‘Y’ and press enter and git will be installed. Type the following to confirm:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ <span class="o">&gt;</span> git <span class="nt">--version</span>
</code></pre></div></div>

<p>and you’ll see something like:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ <span class="o">&gt;</span> git <span class="nt">--version</span>
git version 1.6.3.3
</code></pre></div></div>

<h2 id="intall-python-setuptools">Intall python-setuptools</h2>

<p>Also install the python-setuptools because we’ll need them (gitosis is written in python):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>apt-get <span class="nb">install </span>python-setuptools
...
After this operation, 1126kB of additonal disk space will be used.
Do you want to <span class="k">continue</span> <span class="o">[</span>Y/n]?
</code></pre></div></div>

<p>Press enter or type ‘Y’ and press enter and python-setuptools will be installed.</p>

<h2 id="download-gitosis">Download Gitosis</h2>

<p>We need to clone the gitosis source locally to install it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir </span>src <span class="o">&amp;&amp;</span> <span class="nb">cd </span>src
~/src <span class="nv">$ </span>git clone git://eagain.net/gitosis.git
Initialized empty Git repository <span class="k">in</span> /root/src/gitosis/.git/
remote: Counting objects: 614, <span class="k">done</span><span class="nb">.</span>
remote: Compressing objects: 100% <span class="o">(</span>183/183<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
remote: Total 614 <span class="o">(</span>delta 434<span class="o">)</span>, reused 594 <span class="o">(</span>delta 422<span class="o">)</span>
Receiving objects: 100% <span class="o">(</span>614/614<span class="o">)</span>, 93.82 KiB, <span class="k">done</span><span class="nb">.</span>
Resolving deltas: 100% <span class="o">(</span>434/434<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
</code></pre></div></div>

<h2 id="install-gitosis">Install Gitosis</h2>

<p>Now let’s install it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/src <span class="nv">$ </span><span class="nb">cd </span>gitosis
~/src/gitosis <span class="nv">$ </span>python setup.py <span class="nb">install</span>
</code></pre></div></div>

<p><a href="https://gist.github.com/jmeridth/352769">Result of Installation</a></p>

<p>Gitosis is now installed. Next steps are to create git user and handle a file permission on a git hook.</p>

<h2 id="create-git-user">Create Git User</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>adduser <span class="se">\</span>
    <span class="nt">--system</span> <span class="se">\</span>
    <span class="nt">--shell</span> /bin/bash <span class="se">\</span>
    <span class="nt">--gecos</span> <span class="s1">'git version control'</span> <span class="se">\</span>
    <span class="nt">--group</span> <span class="se">\</span>
    <span class="nt">--disabled-password</span> <span class="se">\</span>
    <span class="nt">--home</span> /home/git <span class="se">\</span>
    git
</code></pre></div></div>

<p>You’ll see something like the following if it is successful</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Adding system user <span class="s1">'git'</span> <span class="o">(</span>UID 103<span class="o">)</span> ...
Adding new group <span class="s1">'git'</span> <span class="o">(</span>GID 105<span class="o">)</span> ...
Adding new user <span class="s1">'git'</span> <span class="o">(</span>UID 103<span class="o">)</span> with group <span class="s1">'git'</span> ...
Creating home directory <span class="s1">'/home/git'</span> ...
</code></pre></div></div>

<h2 id="use-local-public-ssh-key">Use local, public ssh key</h2>

<p>You need to initially use your public ssh key (id_rsa.pub). If you have one, it will be at $HOME/.ssh/id_rsa.pub and if you have never generated one, you can do so by running the following command (accept the default location and you don’t need to enter a passphrase when prompted):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-t</span> rsa
</code></pre></div></div>

<p>Now you need to upload it to the server/slice. I usually use the scp (secure copy command):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp <span class="nv">$HOME</span>/.ssh/id_rsa.pub user@123.123.123.123:/tmp/
</code></pre></div></div>

<p>This will upload the local id_rsa.pub file to the /tmp/ folder on the server. Why there? So that the git user can use it. How is that possible? The folder has permissions of 777 (drwxrwxrwt) meaning everyone has read and write access to it.</p>

<h3 id="sidenotesshport">Sidenote: SSH Port</h3>

<p>If you have your sshd daemon running on a different port other than 22 (which is the default, but I highly suggest changing), then you need to use scp like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp <span class="nt">-P</span> 12345 <span class="nv">$HOME</span>/.ssh/id_rsa.pub user@123.123.123.123:/tmp/
</code></pre></div></div>

<p>I believe the “-P” option must be capitalized.</p>

<h2 id="initialize-gitosis-admin-repository">Initialize gitosis-admin repository</h2>

<p>On the server, issue the following command to set your public ssh key as the first authorized key of a new gitosis-admin repository:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-H</span> <span class="nt">-u</span> git gitosis-init &lt; /tmp/id_rsa.pub
</code></pre></div></div>

<p>You will see something like the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ <span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-H</span> <span class="nt">-u</span> git gitosis-init &lt; /tmp/id_rsa.pub
Initialized empty Git repository <span class="k">in</span> /home/git/repositories/gitosis-admin.git/
Reinitialized existing Git repository <span class="k">in</span> /home/git/repositories/gitosis-admin.git/
</code></pre></div></div>

<p>This means it was successful.</p>

<p>Take note: If you put your id_rsa.pub file in a different location you need to use that instead of /tmp/id_rsa.pub</p>

<h2 id="change-permissions-on-post-update-hook">Change Permissions on post-update hook</h2>

<p>You have to set the permissions on the post-update git hook of the gitosis-admin repository so that gitosis-admin can add new repository structures when they are added/removed to/from the gitosis.conf file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod </span>7555 /home/git/repositories/gitosis-admin.git/hooks/post-update
</code></pre></div></div>

<p>Note: <em>First round of this post, I didn’t make this change. When I added a new project, it failed because this hook didn’t have the right permissions.</em></p>

<h2 id="clone-gitosis-admin-repository">Clone gitosis-admin repository</h2>

<p>Now we’re going to use Git to administrate this gitosis instance. I think that is pretty ingenius. Let’s clone the gitosis-admin repository locally:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ <span class="o">&gt;</span> git clone git@YOUR_SERVER_HOSTNAME:gitosis-admin.git
Initialized empty Git repository <span class="k">in</span> /Users/user/gitosis-admin/.git/
remote: Counting objects: 5, <span class="k">done</span><span class="nb">.</span>
remote: Compressing objects: 100% <span class="o">(</span>4/4<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
Receiving objects: 100% <span class="o">(</span>5/5<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
Resolving deltas: 100% <span class="o">(</span>1/1<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
remote: Total 5 <span class="o">(</span>delta 1<span class="o">)</span>, reused 5 <span class="o">(</span>delta 1<span class="o">)</span>
~ <span class="o">&gt;</span> <span class="nb">cd </span>gitosis-admin
</code></pre></div></div>

<p>We are now in the gitosis-admin repository folder locally</p>

<h3 id="two-most-common-errors">Two most common errors</h3>

<p><strong>FIRST ONE:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ <span class="o">&gt;</span> git clone git@YOUR_SERVER_HOSTNAME:gitosis-admin.git
Initialzed empty Git repository <span class="k">in</span> /Users/user/gitosis-admin/.git/
ssh: connect to host YOUR_SERVER_HOSTNAME port 22: Connection refused
fatal: The remote end hung up unexpectedly
</code></pre></div></div>

<p>it is because you have used a port for SSH other than port 22 (the default). To fix this, you need to edit your .ssh/config file and add the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host YOUR_SERVER_HOSTNAME
Port YOUR_PORT
</code></pre></div></div>

<p>Of course, you need to put in your server hostname and port number (i.e., mydomain.com and 12345)</p>

<p><strong>SECOND ONE:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ <span class="o">&gt;</span> git clone git@YOUR_SERVER_HOSTNAME:gitosis-admin.git
Initialzed empty Git repository <span class="k">in</span> /Users/user/gitosis-admin/.git/
Permission denied <span class="o">(</span>publickey<span class="o">)</span><span class="nb">.</span>
fatal: The remote end hung up unexpectedly
</code></pre></div></div>

<p>This has usually hit me because I locked down my /etc/ssh/sshd_config file to only allow in certain users or groups. I have to change the AllowUsers line in my file from:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AllowUsers jmeridth
</code></pre></div></div>

<p>to</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AllowUsers jmeridth git
</code></pre></div></div>

<p>Once I restart the ssh daemon:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ <span class="o">&gt;</span> <span class="nb">sudo</span> /etc/init.d/ssh restart
</code></pre></div></div>

<p>Now the git user has access to reach my server/slice via ssh.</p>

<h3 id="the-local-gitosis-admin-repository">The local gitosis-admin repository</h3>

<p>You now have a local clone of the gitosis-admin repository. The contents are only a conf file and key directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> <span class="nb">ls
</span>total 8
<span class="nt">-rw-r--r--</span> 1 user staff  1148 May 22 21:31 gitosis.conf
drwxr-xr-x 3 user staff  1028 May 22 21:31 keydir
</code></pre></div></div>

<p>Next Park: <a href="/posts/gitosis-and-gitweb-part-2">Gitosis and Gitweb Part 2</a></p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-05-24T13:40:00-05:00"><a href="https://blog.jasonmeridth.com/posts/my-git-branching-and-workflows-presentation-at-austin-code-camp-2010/">May 24, 2010</a></time>
      </span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://blog.jasonmeridth.com/posts/my-git-branching-and-workflows-presentation-at-austin-code-camp-2010/" rel="bookmark" title="My "Git Branching and Workflows" presentation at Austin Code Camp 2010" itemprop="url">My "Git Branching and Workflows" presentation at Austin Code Camp 2010</a></h1>
    
    <div class="entry-meta">
      <span class="entry-tags"><a href="https://blog.jasonmeridth.com/tags#git" title="Post tagged git" class="tag"><span class="term">git</span></a><a href="https://blog.jasonmeridth.com/tags#presentation" title="Post tagged presentation" class="tag"><span class="term">presentation</span></a></span>
    </div>
  </header>
  <div class="entry-content">
      <p>Thanks to <a href="http://www.drowningintechnicaldebt.com/ShawnWeisfeld/Default.aspx">Shawn Weisfeld</a> for recording this presentation.  Enjoy.</p>

<iframe src="http://blip.tv/play/AYHgu3EC.html?p=1" width="550" height="443" frameborder="0" allowfullscreen=""></iframe>
<embed type="application/x-shockwave-flash" src="http://a.blip.tv/api.swf#AYHgu3EC" style="display:none" />
<p>&lt;/embed&gt;</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated">
        <time datetime="2010-05-23T02:55:00-05:00"><a href="https://blog.jasonmeridth.com/posts/seeing-which-git-branch-i-m-on-via-my-console-prompt-git-ps1/">May 23, 2010</a></time>
      </span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://blog.jasonmeridth.com/posts/seeing-which-git-branch-i-m-on-via-my-console-prompt-git-ps1/" rel="bookmark" title="Seeing which Git branch I'm on via my console prompt (__git_ps1)" itemprop="url">Seeing which Git branch I'm on via my console prompt (__git_ps1)</a></h1>
    
    <div class="entry-meta">
      <span class="entry-tags"><a href="https://blog.jasonmeridth.com/tags#git" title="Post tagged git" class="tag"><span class="term">git</span></a></span>
    </div>
  </header>
  <div class="entry-content">
      <p>I like knowing which Git branch I’m currently in. I use the git-ps1 function feature that comes with git-core. If you clone or download the git source:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git://git.kernel.org/pub/scm/git/git.git
</code></pre></div></div>

<p>There is a file in the contrib/completion folder called git-prompt.sh:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/code/git/contrib/completion<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span> <span class="nb">ls
</span>total 96
<span class="nt">-rwxr-xr-x</span>  1 user  staff    44K Apr 14 15:26 git-prompt.sh
</code></pre></div></div>

<p>I copy this file to my $HOME folder as .git-prompt.sh and then reference it and the ps1 propt feature in my .bashrc file</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.git-prompt.sh
<span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s1">'w$(__git_ps1 "(%s)") &gt; '</span>
</code></pre></div></div>

<p>And now whenever I cd into a folder that is a Git repository I see something like the following prompt:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gitosis-admin<span class="o">(</span>master<span class="o">)</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>Notice the (master) notation. That is telling me I’m on the master branch. It’s just easier than issuing a “git branch” command everytime I want to know.</p>

<p>I know there are many other configurations out there, but I like to use the simplest thing that works.</p>

<h2 id="comments">Comments</h2>

<p><strong><a href="#475" title="2010-05-23 20:07:27">Daniel Hölbling</a>:</strong> I use something similar for my powershell prompt: http://www.tigraine.at/2010/05/16/displaying-git-branch-in-your-powershell-prompt/ greetings Daniel</p>

<p><strong><a href="#476" title="2010-05-24 13:51:43">derick.bailey</a>:</strong> @Daniel - you should check out Posh-Git. it’s a very complete powershell git integration. http://github.com/dahlbyk/posh-git</p>

<p><strong><a href="#477" title="2010-05-24 13:57:56">Jason Meridth</a>:</strong> @Daniel Nice. @Derick Thanks for the info. I’d heard about it, but hadn’t looked yet.</p>

<p><strong><a href="#506" title="2011-07-05 01:32:00">3KWA</a>:</strong> missing in front of w</p>


      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="https://blog.jasonmeridth.com/page14/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="https://blog.jasonmeridth.com/">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="https://blog.jasonmeridth.com/page13/">13</a></li>
      
    
      
        
        
        
        <li><a href="https://blog.jasonmeridth.com/page14/">14</a></li>
      
    
      
        <li><strong class="current-page">15</strong></li>
      
    
      
        
        
        
        <li><a href="https://blog.jasonmeridth.com/page16/">16</a></li>
      
    
      
        
        
        
        <li><a href="https://blog.jasonmeridth.com/page17/">17</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="https://blog.jasonmeridth.com/page56/">56</a></li>
    

    
    
      <li><a href="https://blog.jasonmeridth.com/page16/" class="btn">Next</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="https://blog.jasonmeridth.com/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38456568-3', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>





<script type="text/javascript">
    sharing();
</script>



<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2018 Jason Meridth. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://github.com/aron-bordin/neo-hpstr-jekyll-theme" rel="nofollow">Neo-HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
